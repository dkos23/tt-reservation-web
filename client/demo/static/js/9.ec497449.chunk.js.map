{"version":3,"sources":["calendar/useTime.js","calendar/DatePicker.js","calendar/ReservationDetails.js","calendar/ReservationGroupModal.module.css","user/LoginForm.js","user/LoginForm.module.css","calendar/DatePicker.module.css","calendar/DateTimeRangeSelect.module.css","calendar/ReservationDetails.module.css","calendar/ScrollRadioGroup.module.css","calendar/RepeatReservationForm.module.css","calendar/ReservationDetailsForm.module.css","user/VerifyMailModal.module.css","calendar/DateTimeRangeSelect.js","calendar/ScrollRadioGroup.js","calendar/DisableReservationGroupModal.js","user/LoginModal.js","calendar/RepeatReservationForm.js","calendar/ReservationTimeSelect.js","calendar/ReservationDetailsForm.js","calendar/ReservationGroupModal.js","user/VerifyMailModal.js","calendar/ReservationModal.js","calendar/SlotCell.module.css","calendar/DayTable.module.css","calendar/HoursTable.module.css","calendar/ReservationCalendar.module.css","calendar/SlotCell.js","calendar/DayTable.js","calendar/HoursTable.js","calendar/ReservationCalendar.js","../node_modules/qr.js/lib/mode.js","../node_modules/qr.js/lib/ErrorCorrectLevel.js","../node_modules/qr.js/lib/Polynomial.js","../node_modules/qr.js/lib/math.js","kiosk/DateClock.module.css","../node_modules/qrcode.react/lib/index.js","../node_modules/qr.js/lib/QRCode.js","../node_modules/qr.js/lib/8BitByte.js","../node_modules/qr.js/lib/RSBlock.js","../node_modules/qr.js/lib/BitBuffer.js","../node_modules/qr.js/lib/util.js","kiosk/SystemLinkQr.module.css","kiosk/KioskPage.module.css","kiosk/DateClock.js","kiosk/SystemLinkQr.js","kiosk/KioskPage.js"],"names":["useTime","unit","useState","dayjs","tz","time","setTime","useEffect","interval","setInterval","newTime","isSame","clearInterval","AntDatePicker","generatePicker","dayjsGenerateConfig","DatePicker","props","inputReadOnly","size","panelRender","panel","className","styles","pickerPanel","cn","classNames","bind","ReservationDetails","court","date","inline","name","repeat","wrapper","item","title","content","module","exports","LoginForm","useContext","authContext","autoLoginState","setUser","setRememberLogin","useApi","postLoginApi","loginState","login","loading","valStatus","error","undefined","onFinish","useCallback","mail","password","rememberLogin","type","layout","Item","message","rules","required","validateStatus","autoComplete","prefix","style","color","placeholder","disabled","Password","valuePropName","noStyle","forgotLink","to","htmlType","loginButton","text","registerItem","DateTimeRangeSelect","from","onFromChange","onToChange","hours","useMemo","Array","keys","updateTimes","newFrom","newTo","isAfter","tmp","add","handleFromDateChange","newFromDate","hour","handleToDateChange","newToDate","handleFromHourChange","newFromHour","handleToHourChange","newToHour","allowClear","bordered","datePicker","format","onChange","showToday","suffixIcon","DownOutlined","value","map","Option","ScrollRadioGroup","children","rest","innerRef","useRef","leftScroll","setLeftScroll","rightScroll","setRightScroll","updateStops","current","scrollLeft","scrollWidth","offsetWidth","handleClick","e","offsetLeft","target","parentNode","requestAnimationFrame","Math","max","outer","inner","onClick","onScroll","ref","Group","buttonStyle","DisableReservationGroupModal","initialFrom","initialCourtId","reservation","setOuterReservations","setReservations","appContext","visibleHours","config","courts","reason","setReason","startOf","setFrom","setTo","courtId","setCourtId","prevErrorRef","postReservationGroupApi","postState","postReservationGroup","patchReservationGroupApi","patchState","patchReservationGroup","changed","unavailableReservations","uaRes","handleChangeReason","handleCourtIdChange","handleDisableCourt","checkDate","isSameOrAfter","Modal","icon","width","centered","confirm","okText","okType","onOk","path","groupId","reservations","success","RESERVATION_TYPES","DISABLE","handleRemoveDisable","post","patch","getCourtName","visible","onCancel","footer","ErrorResult","StatusText","Button","label","changeReasonHint","LoginModal","onClose","defaultRepeatValuesMap","1","7","14","RepeatReservationForm","currentReservations","defaultAddCount","repeatValuesMap","user","reservationDaysInAdvance","now","repeatValue","setRepeatValue","visibleDates","setVisibleDates","selectedDates","_setSelectedDates","prevValRef","dateToReservation","checkIfTooFarAhead","admin","checkIfNotAvailable","r1","some","r2","setSelectedDates","_selectedDates","dates","filter","d","s","reset","length","r","sort","a","b","valueOf","Number","MAX_SAFE_INTEGER","i","diff","min","abs","toString","allowedValues","Object","includes","first","last","count","push","addDate","handleRepeatValueChange","newRepeatValue","handleCheckedChange","checked","newSelection","reserved","cr","sd","change","past","isBefore","notAvailable","tooFarAhead","dateButton","unchecked","danger","LockOutlined","DeleteOutlined","PlusOutlined","extra","buttons","ReservationTimeSelect","visibleHoursToHoursArray","toHours","reduce","h","handleFromChange","handleToChange","direction","ReservationDetailsForm","onCourtIdChange","onReservationsChange","onTextChange","readOnly","editName","setEditName","handleEditName","handleCancelEditName","handleDateChange","handleTextChange","plain","nameInput","EditOutlined","ReservationGroupModal","initialTo","reservationTos","templates","changeReason","setChangeReason","setText","groupReservations","setGroupReservations","getReservationsApi","state","getGroupReservations","adminEdit","userId","canEdit","newReservations","gr","cancelReservations","changeText","query","handleChangeChangeReason","handlePostReservation","dangerouslySetInnerHTML","__html","body","NORMAL","handleChangeReservation","ExclamationCircleOutlined","heading","cancelText","handleCancelReservation","cancelType","doDelete","reqParams","cancelRadioGroup","defaultValue","Ball","spin","large","TextArea","autoSize","VerifyMailModal","history","useHistory","handleChangeMailClick","handleResendMail","status","ReservationModal","verified","SlotCell","alwaysClickable","baseRowSpan","courtName","rowIndex","rows","rowSpan","maxRowSpan","span","cell","enabled","padding","slot","mine","height","CELL_PADDING_PX","data-free-text","data-free-text-hover","singleLine","DayTable","onDisableCourtClick","onSlotClick","disableOverlay","setDisableOverlay","isToday","reservableAsOf","subtract","showInfoOverlay","visibleHoursToLocalizedHourRange","handleDisableOverlayClick","today","cols","col","blur","findReservation","adminAction","handleDisableCourtClick","infoOverlay","linkButton","HoursTable","highlightHour","highlight","ReservationCalendar","kiosk","selectedDate","selectedSlot","setSelectedSlot","scrollerRef","getReservations","updateReservations","start","toISOString","end","endOf","useUpdateEffect","UPDATE_INTERVALS_SEC","RESERVATIONS","_","index","handleSlotClicked","handleDisableCourtClicked","handleReservationFinish","tableWrapper","tableScroller","MODE_NUMBER","MODE_ALPHA_NUM","MODE_8BIT_BYTE","MODE_KANJI","L","M","Q","H","math","require","QRPolynomial","num","shift","Error","offset","this","prototype","get","getLength","multiply","j","gexp","glog","mod","ratio","QRMath","n","LOG_TABLE","EXP_TABLE","_typeof","obj","Symbol","iterator","constructor","_extends","assign","arguments","source","key","hasOwnProperty","call","apply","ownKeys","object","enumerableOnly","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","enumerable","_objectSpread","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_objectWithoutProperties","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","sourceSymbolKeys","propertyIsEnumerable","_classCallCheck","instance","Constructor","TypeError","_defineProperties","descriptor","configurable","writable","_createClass","protoProps","staticProps","_possibleConstructorReturn","self","_assertThisInitialized","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","ReferenceError","_inherits","subClass","superClass","create","_setPrototypeOf","p","React","QRCodeImpl","ErrorCorrectLevel","convertStr","str","out","charcode","charCodeAt","String","fromCharCode","DEFAULT_PROPS","level","bgColor","fgColor","includeMargin","generatePath","modules","margin","ops","row","y","x","concat","join","excavateModules","excavation","slice","w","getImageSettings","cells","imageSettings","numCells","defaultSize","floor","scale","excavate","floorX","floorY","ceil","SUPPORTS_PATH2D","Path2D","addPath","QRCodeCanvas","_React$PureComponent","_getPrototypeOf2","_this","_len","args","_key","imgLoaded","setState","update","_this$props","qrcode","addData","make","_canvas","canvas","ctx","getContext","calculatedImageSettings","pixelRatio","window","devicePixelRatio","fillStyle","fillRect","fill","rdx","cdx","_image","drawImage","_this2","_this$props2","otherProps","canvasStyle","img","imgSrc","src","createElement","display","onLoad","handleImageLoad","_ref","Fragment","_ref2","PureComponent","QRCodeSVG","_React$PureComponent2","_this$props3","image","xlinkHref","preserveAspectRatio","fgPath","shapeRendering","viewBox","QRCode","renderAs","Component","defaultProps","BitByte","RSBlock","BitBuffer","util","Polynomial","typeNumber","errorCorrectLevel","moduleCount","dataCache","dataList","proto","data","newData","isDark","getModuleCount","rsBlocks","getRSBlocks","buffer","totalDataCount","dataCount","put","mode","getLengthInBits","write","makeImpl","getBestMaskPattern","test","maskPattern","setupPositionProbePattern","setupPositionAdjustPattern","setupTimingPattern","setupTypeInfo","setupTypeNumber","createData","mapData","c","minLostPoint","pattern","lostPoint","getLostPoint","createMovieClip","target_mc","instance_name","depth","qr_mc","createEmptyMovieClip","beginFill","moveTo","lineTo","endFill","pos","getPatternPosition","bits","getBCHTypeNumber","getBCHTypeInfo","inc","bitIndex","byteIndex","dark","getMask","PAD0","PAD1","putBit","createBytes","maxDcCount","maxEcCount","dcdata","ecdata","dcCount","ecCount","totalCount","rsPoly","getErrorCorrectPolynomial","modPoly","modIndex","totalCodeCount","QR8bitByte","ECL","QRRSBlock","RS_BLOCK_TABLE","rsBlock","getRsBlockTable","list","QRBitBuffer","bufIndex","bit","Mode","QRMaskPattern","QRUtil","PATTERN_POSITION_TABLE","G15","G18","G15_MASK","getBCHDigit","digit","errorCorrectLength","qrCode","sameCount","darkCount","DateClock","dateTime","setDateTime","int","clockDots","SystemLinkQr","url","qr","replace","KioskPage","announcement","orgName","search","useLocation","params","parseQuery","updateInterval","parseInt","console","BASE_DATA","setDefaultUpdateIntervals","top","subTitle","linkQr","alert","showIcon"],"mappings":"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","file":"static/js/9.ec497449.chunk.js","sourcesContent":["import { useEffect, useState } from 'react';\n\nimport dayjs from 'dayjs';\n\nconst checkIntervalMs = 60000; // minute\n\nexport function useTime(unit) {\n    const [time, setTime] = useState(() => dayjs.tz());\n\n    useEffect(() => {\n        const interval = setInterval(() => {\n            const newTime = dayjs.tz();\n            if (!time.isSame(newTime, unit))\n                setTime(newTime);\n        }, checkIntervalMs);\n\n        return () => clearInterval(interval);\n    }, [time, unit]);\n\n    return time;\n}","import dayjsGenerateConfig from 'rc-picker/lib/generate/dayjs';\nimport generatePicker from 'antd/es/date-picker/generatePicker';\nimport styles from './DatePicker.module.css';\n\nconst AntDatePicker = generatePicker(dayjsGenerateConfig);\n\nexport function DatePicker(props) {\n    return (\n        <AntDatePicker\n            inputReadOnly\n            size=\"large\"\n            panelRender={panel => \n                <div className={styles.pickerPanel}>\n                    {panel}\n                </div>\n            }\n            {...props}\n        />\n    );\n}","import { CalendarOutlined, ClockCircleOutlined, EnvironmentOutlined, RedoOutlined, UserOutlined } from '@ant-design/icons';\n\nimport React from 'react';\nimport classNames from 'classnames/bind';\nimport styles from './ReservationDetails.module.css';\n\nconst cn = classNames.bind(styles);\n\nexport function ReservationDetails({\n    court,\n    date,\n    inline = false,\n    name,\n    repeat,\n    time,\n}) {\n    return (\n        <div className={cn({\n            wrapper: true,\n            inline\n        })}>\n            {name &&\n                <div className={styles.item}>\n                    <div className={styles.title}>\n                        <UserOutlined />&nbsp;Name\n                    </div>\n                    <div className={styles.content}>\n                        {name}\n                    </div>\n                </div>\n            }\n\n            {date && \n                <div className={styles.item}>\n                    <div className={styles.title}>\n                        <CalendarOutlined />&nbsp;Datum\n                    </div>\n                    <div className={styles.content}>\n                        {date}\n                    </div>\n                </div>\n            }\n\n            {time &&\n                <div className={styles.item}>\n                    <div className={styles.title}>\n                        <ClockCircleOutlined />&nbsp;Uhrzeit\n                    </div>\n                    <div className={styles.content}>\n                        {time}\n                    </div>\n                </div>\n            }\n\n            {court &&\n                <div className={styles.item}>\n                    <div className={styles.title}>\n                        <EnvironmentOutlined />&nbsp;Platz\n                    </div>\n                    <div className={styles.content}>\n                        {court}\n                    </div>\n                </div>\n            }\n\n            {repeat &&\n                <div className={styles.item}>\n                    <div className={styles.title}>\n                        <RedoOutlined />&nbsp;Wiederholung\n                    </div>\n                    <div className={styles.content}>\n                        {repeat}\n                    </div>\n                </div>\n            }\n        </ div>\n    );\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"ReservationGroupModal_wrapper__2fAcz\",\"footer\":\"ReservationGroupModal_footer__1O-So\",\"heading\":\"ReservationGroupModal_heading__3HVFg\",\"changeReasonHint\":\"ReservationGroupModal_changeReasonHint__IWCAI\",\"cancelRadioGroup\":\"ReservationGroupModal_cancelRadioGroup__joJ8_\"};","import { Alert, Button, Checkbox, Form, Input } from 'antd';\nimport { LockOutlined, MailOutlined } from '@ant-design/icons';\nimport React, { useCallback, useContext } from 'react';\n\nimport { Link } from 'react-router-dom';\nimport { StatusText } from '../admin/StatusText';\nimport { authContext } from '../AuthContext';\nimport { postLoginApi } from '../api';\nimport styles from './LoginForm.module.css';\nimport { useApi } from '../useApi';\n\nexport function LoginForm() {\n\n    const { autoLoginState, setUser, setRememberLogin } = useContext(authContext);\n    const [loginState, login] = useApi(postLoginApi, setUser);\n\n    const loading = loginState.loading || autoLoginState.loading;\n    const valStatus = loginState.error ? 'error' : undefined;\n\n    const onFinish = useCallback(({ mail, password, rememberLogin }) => {\n        setRememberLogin(rememberLogin);\n        login(null, {\n            type: 'plain',\n            mail,\n            password,\n        });\n    }, [login, setRememberLogin]);\n\n    return (\n        <Form\n            layout=\"vertical\"\n            onFinish={onFinish}\n        >\n            {loginState.error &&\n                <Form.Item>\n                    <Alert\n                        type=\"error\"\n                        message=\"Login fehlgeschlagen.\"\n                    />\n                </Form.Item>\n            }\n\n            <Form.Item\n                name=\"mail\"\n                rules={[{ required: true, message: 'E-Mail Adresse ist erforderlich' }]}\n                validateStatus={valStatus}\n            >\n                <Input\n                    autoComplete=\"email\"\n                    prefix={<MailOutlined style={{ color: '#aaa' }} />}\n                    placeholder=\"E-Mail\"\n                    disabled={loading}\n                />\n            </Form.Item>\n\n            <Form.Item\n                name=\"password\"\n                rules={[{ required: true, message: 'Passwort ist erforderlich' }]}\n                validateStatus={valStatus}\n            >\n                <Input.Password\n                    autoComplete=\"current-password\"\n                    prefix={<LockOutlined style={{ color: '#aaa' }} />}\n                    placeholder=\"Passwort\"\n                    disabled={loading}\n                />\n            </Form.Item>\n\n            <Form.Item>\n                <Form.Item name=\"rememberLogin\" valuePropName=\"checked\" noStyle>\n                    <Checkbox\n                        disabled={loading}\n                    >\n                        Angemeldet bleiben\n                    </Checkbox>\n                </Form.Item>\n\n                {/* TODO */}\n                <Link className={styles.forgotLink} to=\"/reset-password\">\n                    Password vergessen\n                </Link>\n            </Form.Item>\n\n            <Form.Item>\n                <Button\n                    type=\"primary\"\n                    htmlType=\"submit\"\n                    className={styles.loginButton}\n                    disabled={loading}\n                >\n                    <StatusText\n                        loading={loading}\n                        text={loading ? 'Anmeldung...' : 'Anmelden'}\n                    />\n                </Button>\n            </Form.Item>\n\n\n            <Form.Item className={styles.registerItem}>\n                <span>oder </span>\n                <Link to=\"/register\">Kostenlos Registrieren</Link>\n            </Form.Item>\n        </Form>\n    );\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loginButton\":\"LoginForm_loginButton__ECun6\",\"forgotLink\":\"LoginForm_forgotLink__3TG3V\",\"registerItem\":\"LoginForm_registerItem__32Qy-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pickerPanel\":\"DatePicker_pickerPanel__jgKnn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"datePicker\":\"DateTimeRangeSelect_datePicker__1Fzuj\",\"to\":\"DateTimeRangeSelect_to__3kFPy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"inline\":\"ReservationDetails_inline__3Zvud\",\"wrapper\":\"ReservationDetails_wrapper__3oaB0\",\"item\":\"ReservationDetails_item__3c9da\",\"title\":\"ReservationDetails_title__30qxj\",\"content\":\"ReservationDetails_content__3o1oW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"outer\":\"ScrollRadioGroup_outer__2bjrJ\",\"inner\":\"ScrollRadioGroup_inner__1IIQl\",\"leftScroll\":\"ScrollRadioGroup_leftScroll__sR-on\",\"rightScroll\":\"ScrollRadioGroup_rightScroll__2FgOg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"RepeatReservationForm_wrapper__q6uz0\",\"dates\":\"RepeatReservationForm_dates__1dD0l\",\"extra\":\"RepeatReservationForm_extra__2m-4n\",\"unchecked\":\"RepeatReservationForm_unchecked__dAyq1\",\"date\":\"RepeatReservationForm_date__3wvGK\",\"dateButton\":\"RepeatReservationForm_dateButton__2XPFl\",\"danger\":\"RepeatReservationForm_danger__3-oIh\",\"buttons\":\"RepeatReservationForm_buttons__IeXBV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nameInput\":\"ReservationDetailsForm_nameInput__20wfd\",\"plain\":\"ReservationDetailsForm_plain__VkUtA\",\"datePicker\":\"ReservationDetailsForm_datePicker__jvGx4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"buttons\":\"VerifyMailModal_buttons__2ZzQz\"};","import React, { useCallback, useMemo } from 'react';\n\nimport { DatePicker } from './DatePicker';\nimport { DownOutlined } from '@ant-design/icons';\nimport { Select } from 'antd';\nimport styles from './DateTimeRangeSelect.module.css';\n\nexport function DateTimeRangeSelect({\n    disabled = false,\n    from,\n    to,\n    onFromChange,\n    onToChange,\n}) {\n    const hours = useMemo(() => [...Array(24).keys()], []);\n\n    const updateTimes = useCallback(({ newFrom = from, newTo = to }) => {\n        if (newFrom.isAfter(newTo)) {\n            const tmp = newFrom;\n            newFrom = newTo;\n            newTo = tmp;\n        } else if (newFrom.isSame(newTo)) {\n            newTo = newFrom.add(1, 'hour'); // minimal diff 1 hour\n        }\n\n        if (!newFrom.isSame(from))\n            onFromChange(newFrom);\n        if (!newTo.isSame(to))\n            onToChange(newTo);\n    }, [from, onFromChange, onToChange, to]);\n\n    const handleFromDateChange = useCallback(newFromDate => {\n        updateTimes({\n            newFrom: newFromDate.hour(from.hour())\n        });\n    }, [from, updateTimes]);\n\n    const handleToDateChange = useCallback(newToDate => {\n        updateTimes({\n            newTo: newToDate.hour(to.hour())\n        });\n    }, [to, updateTimes]);\n\n    const handleFromHourChange = useCallback(newFromHour => {\n        updateTimes({\n            newFrom: from.hour(newFromHour)\n        });\n    }, [from, updateTimes]);\n\n    const handleToHourChange = useCallback(newToHour => {\n        updateTimes({\n            newTo: to.hour(newToHour)\n        });\n    }, [to, updateTimes]);\n\n    return (\n        <div>\n            <div>\n                <DatePicker\n                    allowClear={false}\n                    bordered={false}\n                    className={styles.datePicker}\n                    disabled={disabled}\n                    format=\"L\"\n                    onChange={handleFromDateChange}\n                    showToday={false}\n                    suffixIcon={<DownOutlined />}\n                    value={from}\n                />\n\n                <Select\n                    size=\"large\"\n                    bordered={false}\n                    value={from.hour()}\n                    onChange={handleFromHourChange}\n                >\n                    {hours.map(hour => (\n                        <Select.Option\n                            key={hour}\n                            value={hour}\n                        >\n                            {hour} Uhr\n                        </Select.Option>\n                    ))}\n                </Select>\n\n            </div>\n\n            <div>\n                <span className={styles.to}>bis</span>\n\n                <DatePicker\n                    allowClear={false}\n                    bordered={false}\n                    className={styles.datePicker}\n                    disabled={disabled}\n                    format=\"L\"\n                    onChange={handleToDateChange}\n                    showToday={false}\n                    suffixIcon={<DownOutlined />}\n                    value={to}\n                />\n\n                <Select\n                    size=\"large\"\n                    bordered={false}\n                    value={to.hour()}\n                    onChange={handleToHourChange}\n                >\n                    {hours.map(hour => (\n                        <Select.Option\n                            key={hour}\n                            value={hour}\n                        >\n                            {hour % 24} Uhr\n                        </Select.Option>\n                    ))}\n                </Select>\n            </div>\n        </div>\n    );\n}","import React, { useCallback, useEffect, useRef, useState } from 'react';\n\nimport { Radio } from 'antd';\nimport classNames from 'classnames/bind';\nimport styles from './ScrollRadioGroup.module.css';\n\nconst cn = classNames.bind(styles);\n\nconst SCROLL_OFFSET_PX = -50;\nconst SCROLL_TRESHOLD_PX = 5; // needed for iOS overscoll\n\nexport function ScrollRadioGroup({\n    children,\n    ...rest\n}) {\n    const innerRef = useRef();\n    const [leftScroll, setLeftScroll] = useState(false);\n    const [rightScroll, setRightScroll] = useState(false);\n\n    const updateStops = useCallback(() => {\n        if (!innerRef.current)\n            return;\n        const { scrollLeft, scrollWidth, offsetWidth } = innerRef.current;\n        setLeftScroll(scrollLeft > SCROLL_TRESHOLD_PX);\n        setRightScroll((scrollWidth - offsetWidth - scrollLeft) > SCROLL_TRESHOLD_PX);\n    }, []);\n\n    useEffect(updateStops, [updateStops]);\n\n    const handleClick = useCallback(e => {\n        if (!innerRef.current)\n            return;\n        const offsetLeft = e?.target?.parentNode?.parentNode?.offsetLeft || 0;\n        requestAnimationFrame(() => {\n            innerRef.current.scrollLeft = Math.max(offsetLeft + SCROLL_OFFSET_PX, 0);\n        });\n    }, []);\n\n    return (\n        <div className={cn({\n            outer: true,\n            leftScroll,\n            rightScroll,\n        })}>\n            <div\n                className={styles.inner}\n                onClick={handleClick}\n                onScroll={updateStops}\n                ref={innerRef}\n            >\n                <Radio.Group\n                    buttonStyle=\"solid\"\n                    size=\"large\"\n                    {...rest}\n                >\n                    {children}\n                </Radio.Group>\n            </div>\n        </div>\n    );\n}","import { Button, Form, Input, Modal, Radio, message } from 'antd';\nimport React, { useCallback, useContext, useEffect, useMemo, useRef, useState } from 'react';\nimport { patchReservationGroupApi, postReservationGroupApi } from '../api';\n\nimport { DateTimeRangeSelect } from './DateTimeRangeSelect';\nimport { ErrorResult } from '../ErrorResult';\nimport { RESERVATION_TYPES } from '../ReservationTypes';\nimport { ReservationDetails } from './ReservationDetails';\nimport { ScrollRadioGroup } from './ScrollRadioGroup';\nimport { StatusText } from '../admin/StatusText';\nimport { appContext } from '../AppContext';\nimport dayjs from 'dayjs';\nimport { getCourtName } from '../helper';\nimport styles from './ReservationGroupModal.module.css';\nimport { useApi } from '../useApi';\n\nexport function DisableReservationGroupModal({\n    initialFrom,\n    initialCourtId,\n    reservation,\n    onFinish,\n    setReservations: setOuterReservations,\n}) {\n    const { config: { visibleHours }, courts } = useContext(appContext);\n\n    const [reason, setReason] = useState(reservation?.text || '');\n    const [from, setFrom] = useState(() => reservation?.from || initialFrom.startOf('day'));\n    const [to, setTo] = useState(() => reservation?.to || initialFrom.add(1, 'day').startOf('day'));\n    const [courtId, setCourtId] = useState(reservation?.courtId || initialCourtId);\n    const prevErrorRef = useRef({});\n\n    const [postState, postReservationGroup] = useApi(postReservationGroupApi, setOuterReservations);\n    const [patchState, patchReservationGroup] = useApi(patchReservationGroupApi, setOuterReservations);\n\n    const loading = postState.loading || patchState.loading;\n    const changed = reservation && (\n        reservation.from !== from\n        || reservation.to !== to\n        || reservation.text !== reason\n        || reservation.courtId !== courtId\n    );\n\n    const unavailableReservations = useMemo(() => {\n        let uaRes = postState.error?.unavailableReservations || patchState.error?.unavailableReservations;\n        if (uaRes)\n            uaRes = uaRes.map(({ courtId, from, to }) => ({\n                courtId,\n                from: dayjs(from),\n                to: dayjs(to),\n            }));\n        return uaRes;\n    }, [patchState.error?.unavailableReservations, postState.error?.unavailableReservations]);\n\n    const handleChangeReason = useCallback(e => {\n        setReason(e.target.value);\n    }, []);\n\n    const handleCourtIdChange = useCallback(e => {\n        setCourtId(e.target.value);\n    }, []);\n\n    const handleDisableCourt = useCallback(() => {\n        const doDisable = () => {\n            if (!reservation) {\n                postReservationGroup(null, {\n                    reservations: [{ courtId, from, to }],\n                    text: reason,\n                    type: RESERVATION_TYPES.DISABLE,\n                }, () => {\n                    message.success(\"Sperren erfolgreich\");\n                    onFinish();\n                });\n            } else {\n                patchReservationGroup({\n                    path: {\n                        groupId: reservation.groupId\n                    }\n                }, {\n                    reservations: [{ courtId, from, to }],\n                    text: reason,\n                }, () => {\n                    message.success(\"Sperren erfolgreich\");\n                    onFinish();\n                });\n            }\n        };\n\n        let checkDate;\n        if (from.hour() <= visibleHours[0])\n            checkDate = from.hour(visibleHours[0]);\n        else if (from.hour() >= visibleHours[1])\n            checkDate = from.add(1, 'day').hour(visibleHours[0]);\n\n        if (checkDate?.isSameOrAfter(to, 'hour')) {\n            Modal.error({\n                icon: false,\n                title: 'Sperrung unzulässig',\n                width: 530,\n                centered: true,\n                content: 'Die Sperrung liegt außerhalb des angezeigten Zeitraums.',\n            });\n        } else {\n            Modal.confirm({\n                icon: false,\n                title: 'Wirklich sperren?',\n                okText: 'Sperren',\n                okType: 'danger',\n                width: 530,\n                centered: true,\n                content: 'Bestehende Reservierungen, die mit der Sperrung in Konflikt stehen, werden automatisch storniert. Die Inhaber der Reservierungen werden darüber per E-Mail informiert.',\n                onOk: doDisable,\n            });\n        }\n    }, [courtId, from, onFinish, patchReservationGroup, postReservationGroup, reason, reservation, to, visibleHours]);\n\n    const handleRemoveDisable = useCallback(() => {\n        patchReservationGroup({\n            path: {\n                groupId: reservation.groupId\n            }\n        }, {\n            reservations: [],\n        }, () => {\n            message.success(\"Sperrung aufgehoben\");\n            onFinish();\n        });\n    }, [onFinish, patchReservationGroup, reservation?.groupId]);\n\n    useEffect(() => {\n        if (prevErrorRef.current.post === postState.error\n            && prevErrorRef.current.patch === patchState.error)\n            return;\n        prevErrorRef.current.post = postState.error;\n        prevErrorRef.current.patch = patchState.error;\n\n        if (unavailableReservations) {\n            Modal.error({\n                centered: true,\n                title: 'Sperren fehlgeschlagen',\n                content: (\n                    <div>\n                        <div>\n                            Für folgende Zeiträume liegt bereits eine Sperrung vor:\n                        </div>\n                        <ul>\n                            {unavailableReservations.map(({ courtId, from, to }) => (\n                                <li key={from}>{from.format('dd[\\xa0]L,[\\xa0]H[\\xa0][Uhr]')} bis {to.format('dd[\\xa0]L,[\\xa0]H[\\xa0][Uhr]')}, {getCourtName(courts, courtId)}</li>\n                            ))}\n                        </ul>\n                    </div>\n                )\n            });\n        }\n    }, [courts, patchState.error, postState.error, unavailableReservations])\n\n    if (\n        (postState.error && !postState.error.unavailableReservations)\n        || (patchState.error && !patchState.error.unavailableReservations)\n    ) {\n        return (\n            <Modal\n                title=\"Sperren fehlgeschlagen\"\n                visible={true}\n                centered\n                onCancel={onFinish}\n                onOk={onFinish}\n                footer={\n                    <div className={styles.footer}>\n                        <Button onClick={onFinish}>\n                            Abbrechen\n                        </Button>\n                    </div>\n                }\n            >\n                <div className={styles.wrapper}>\n                    <ErrorResult />\n                </div>\n            </Modal>\n        );\n    }\n\n    return (\n        <Modal\n            title=\"Platz Sperren\"\n            visible={true}\n            width={530}\n            centered\n            onCancel={onFinish}\n            onOk={onFinish}\n            footer={loading ?\n                (\n                    <StatusText\n                        loading\n                        text=\"Bitte warten...\"\n                    />\n                ) : (\n                    <div className={styles.footer}>\n                        <Button onClick={onFinish}>\n                            Abbrechen\n                        </Button>\n                        {reservation &&\n                            <Button\n                                type=\"primary\"\n                                onClick={handleRemoveDisable}\n                            >\n                                Sperrung Aufheben\n                            </Button>\n                        }\n                        <Button\n                            disabled={reservation && !changed}\n                            type=\"danger\"\n                            onClick={handleDisableCourt}\n                        >\n                            Sperren\n                        </Button>\n                    </div>\n                )\n            }\n        >\n            <div className={styles.wrapper}>\n                <ReservationDetails\n                    court={\n                        <ScrollRadioGroup\n                            disabled={loading}\n                            onChange={handleCourtIdChange}\n                            value={courtId}\n                        >\n                            {courts.map(({ courtId, name }) => (\n                                <Radio.Button key={courtId} value={courtId}>{name}</Radio.Button>\n                            ))}\n                        </ScrollRadioGroup>\n                    }\n                    date={\n                        <DateTimeRangeSelect\n                            disabled={loading}\n                            from={from}\n                            to={to}\n                            onFromChange={setFrom}\n                            onToChange={setTo}\n                        />\n                    }\n                />\n\n                <Form layout=\"vertical\">\n                    <Form.Item\n                        label=\"Grund der Sperrung\"\n                    >\n                        <Input\n                            disabled={loading}\n                            onChange={handleChangeReason}\n                            placeholder=\"Kein Grund\"\n                            value={reason}\n                        />\n                        <div className={styles.changeReasonHint}>\n                            Bestehende Reservierungen werden storniert.\n                        </div>\n                    </Form.Item>\n                </Form>\n            </div>\n        </Modal>\n    );\n}","import { LoginForm } from './LoginForm';\nimport { Modal } from 'antd';\nimport React from 'react';\n\nexport function LoginModal({\n    onClose\n}) {\n    return (\n        <Modal\n            title=\"Anmeldung erforderlich\"\n            visible={true}\n            width={400}\n            centered\n            onCancel={onClose}\n            onOk={onClose}\n            footer={null}\n        >\n            <LoginForm />\n        </Modal>\n    );\n}","import { Button, Radio } from 'antd';\nimport { DeleteOutlined, LockOutlined, PlusOutlined } from '@ant-design/icons';\nimport React, { useCallback, useContext, useEffect, useMemo, useRef, useState } from 'react';\n\nimport { ScrollRadioGroup } from './ScrollRadioGroup';\nimport { appContext } from '../AppContext';\nimport { authContext } from '../AuthContext';\nimport classNames from 'classnames/bind';\nimport styles from './RepeatReservationForm.module.css';\nimport { useTime } from './useTime';\n\nconst cn = classNames.bind(styles);\n\nconst defaultRepeatValuesMap = {\n    1: 'Täglich',\n    7: 'Wöchentlich',\n    14: '2-Wöchentlich',\n};\n\nexport function RepeatReservationForm({\n    courtId,\n    currentReservations,\n    defaultAddCount = 2,\n    disabled = false,\n    from,\n    onChange,\n    repeatValuesMap = defaultRepeatValuesMap,\n    to,\n    unavailableReservations,\n}) {\n    const { user } = useContext(authContext);\n    const { config: { reservationDaysInAdvance } } = useContext(appContext);\n\n    const now = useTime('hour');\n\n    const [repeatValue, setRepeatValue] = useState(0);\n    const [visibleDates, setVisibleDates] = useState([]);\n    const [selectedDates, _setSelectedDates] = useState([]);\n    const prevValRef = useRef({});\n\n    const dateToReservation = useCallback(from => ({\n        courtId,\n        from,\n        to: from.hour(to.hour() || 24),\n    }), [courtId, to]);\n\n    const checkIfTooFarAhead = useCallback(date => (\n        !user?.admin && date.isAfter(now.add(reservationDaysInAdvance, 'day'), 'day')\n    ), [now, reservationDaysInAdvance, user?.admin]);\n\n    const checkIfNotAvailable = useCallback(date => {\n        if (!unavailableReservations)\n            return false;\n        const r1 = dateToReservation(date);\n        return unavailableReservations.some(r2 => (\n            r1.courtId === r2.courtId\n            && r1.from.isSame(r2.from, 'hour')\n            && r1.to.isSame(r2.to, 'hour')\n        ));\n    }, [unavailableReservations, dateToReservation]);\n\n    const setSelectedDates = useCallback(selectedDates => {\n        _setSelectedDates(_selectedDates => {\n            let dates = selectedDates;\n            if (typeof selectedDates === 'function')\n                dates = selectedDates(_selectedDates);\n            return dates.filter(d => !checkIfNotAvailable(d) && !checkIfTooFarAhead(d));\n        });\n    }, [checkIfNotAvailable, checkIfTooFarAhead]);\n\n    useEffect(() => {\n        onChange(selectedDates.map(dateToReservation));\n    }, [selectedDates, onChange, dateToReservation]);\n\n    // automatically unchecks unavailable dates if unavailableDates changes\n    // or time/config changes\n    useEffect(() => setSelectedDates(s => s), [setSelectedDates]);\n\n    const reset = useCallback(() => {\n        let selectedDates = [];\n        let visibleDates = [];\n\n        if (currentReservations?.length > 1) {\n            selectedDates = currentReservations.map(r => r.from.hour(from.hour()));\n            selectedDates.sort((a, b) => a.valueOf() - b.valueOf());\n            let repeatValue = Number.MAX_SAFE_INTEGER;\n\n            if (selectedDates.length > 1) {\n                for (let i = 1; i < selectedDates.length; ++i) {\n                    const diff = selectedDates[i - 1].diff(selectedDates[i], 'day');\n                    repeatValue = Math.min(repeatValue, Math.abs(diff));\n                }\n            }\n\n            repeatValue = repeatValue.toString();\n            const allowedValues = Object.keys(repeatValuesMap);\n            if (!allowedValues.includes(repeatValue))\n                repeatValue = allowedValues[0];\n            setRepeatValue(repeatValue);\n\n            const first = selectedDates[0];\n            const last = selectedDates[selectedDates.length - 1];\n            const count = Math.abs(first.diff(last, 'day') / repeatValue);\n            visibleDates = [];\n            for (let i = 0; i <= count; ++i)\n                visibleDates.push(first.add(i * repeatValue, 'day'));\n        } else if (repeatValue > 0) {\n            for (let i = 0; i <= defaultAddCount; ++i) {\n                const date = from.add(i * repeatValue, 'day');\n                visibleDates.push(date);\n                selectedDates.push(date);\n            }\n        } else {\n            selectedDates = [from];\n            visibleDates = [from];\n        }\n\n        setVisibleDates(visibleDates);\n        setSelectedDates(selectedDates);\n    }, [currentReservations, defaultAddCount, from, repeatValue, repeatValuesMap, setSelectedDates]);\n\n    useEffect(() => {\n        if (\n            prevValRef.current.courtId !== courtId\n            || prevValRef.current.currentReservations !== currentReservations\n            || prevValRef.current.from !== from\n            || prevValRef.current.repeatValue !== repeatValue\n            || prevValRef.current.to !== to\n        ) {\n            prevValRef.current.courtId = courtId;\n            prevValRef.current.currentReservations = currentReservations;\n            prevValRef.current.from = from;\n            prevValRef.current.repeatValue = repeatValue;\n            prevValRef.current.to = to;\n            reset();\n        }\n    }, [courtId, currentReservations, from, repeatValue, reset, to]);\n\n    const addDate = useCallback(() => {\n        setVisibleDates(visibleDates => {\n            const last = visibleDates[visibleDates.length - 1];\n            const add = last.add(repeatValue, 'day');\n            setSelectedDates(selectedDates => [...selectedDates, add]);\n            return [...visibleDates, add];\n        });\n    }, [repeatValue, setSelectedDates]);\n\n    const handleRepeatValueChange = useCallback(e => {\n        const newRepeatValue = e.target.value;\n        setRepeatValue(newRepeatValue);\n    }, []);\n\n    const handleCheckedChange = useCallback((date, checked) => {\n        setSelectedDates(selectedDates => {\n            // change checked state\n            const newSelection = selectedDates.filter(d => !d.isSame(date, 'day'));\n            if (checked)\n                newSelection.push(date);\n            newSelection.sort((a, b) => a.valueOf() - b.valueOf());\n\n            // remove unchecked visible dates at end\n            // setVisibleDates(visibleDates => {\n            //     const newVisibleDates = [...visibleDates];\n            //     // i > 0: make sure at least one item is visible\n            //     for (let i = newVisibleDates.length - 1; i > 0; --i) {\n            //         if (\n            //             currentReservations?.some(r => r.from.isSame(newVisibleDates[i], 'day'))\n            //             || newSelection.some(d => d.isSame(newVisibleDates[i], 'day'))\n            //         ) {\n            //             break;\n            //         }\n            //         newVisibleDates.pop();\n            //     }\n            //     return newVisibleDates;\n            // });\n\n            return newSelection;\n        });\n    }, [setSelectedDates]);\n\n    const dates = useMemo(() => {\n        return visibleDates.map(d => {\n            const r = dateToReservation(d);\n            const reserved = currentReservations?.some(cr =>\n                cr.from.isSame(r.from, 'hour') && cr.to.isSame(r.to, 'hour'));\n            const checked = selectedDates.some(sd => sd.isSame(d, 'day'));\n            return {\n                date: d,\n                checked,\n                change: !reserved && currentReservations?.some(r => r.from.isSame(d, 'day')),\n                reserved,\n                past: d.isBefore(now, 'hour'),\n                notAvailable: checkIfNotAvailable(d),\n                tooFarAhead: checkIfTooFarAhead(d),\n                onClick: () => handleCheckedChange(d, !checked),\n            };\n        });\n    }, [\n        checkIfNotAvailable,\n        checkIfTooFarAhead,\n        currentReservations,\n        dateToReservation,\n        handleCheckedChange,\n        now,\n        selectedDates,\n        visibleDates,\n    ]);\n\n\n    return (\n        <div className={styles.wrapper}>\n            <div>\n                <ScrollRadioGroup\n                    disabled={currentReservations?.length > 1 || disabled}\n                    onChange={handleRepeatValueChange}\n                    value={repeatValue}\n                >\n                    <Radio.Button key={0} value={0}>Einzeltermin</Radio.Button>\n                    {Object.keys(repeatValuesMap).map(value => (\n                        <Radio.Button key={value} value={value}>{repeatValuesMap[value]}</Radio.Button>\n                    ))}\n                </ScrollRadioGroup>\n            </div>\n\n            {repeatValue > 0 &&\n                <>\n                    <div className={styles.dates}>\n                        {dates.map(({ date, checked, change, reserved, past, notAvailable, tooFarAhead, onClick }) => (\n                            <Button\n                                key={date}\n                                className={cn({\n                                    dateButton: true,\n                                    unchecked: !checked,\n                                    danger: (reserved && !checked) || notAvailable,\n                                })}\n                                disabled={(!user?.admin && (past || tooFarAhead)) || notAvailable || disabled}\n                                onClick={onClick}\n                                type=\"link\"\n                                icon={\n                                    ((!user?.admin && (past || tooFarAhead)) || notAvailable || disabled)\n                                        ? <LockOutlined />\n                                        : checked ? <DeleteOutlined /> : <PlusOutlined />\n                                }\n                            >\n                                <span className={styles.date}>{date.format('dd[\\xa0]L')}</span>\n                                {!past && reserved && checked && <span className={styles.extra}>Aktuell reserviert</span>}\n                                {!past && reserved && !checked && <span className={styles.extra}>Wird storniert</span>}\n                                {!notAvailable && past && <span className={styles.extra}>Bereits vergangen</span>}\n                                {!notAvailable && tooFarAhead && <span className={styles.extra}>Zu weit in der Zukunft</span>}\n                                {!notAvailable && change && <span className={styles.extra}>Wird geändert</span>}\n                                {notAvailable && <span className={styles.extra}>Nicht verfügbar</span>}\n                            </Button>\n                        ))}\n                    </div>\n                    <div className={styles.buttons}>\n                        <Button\n                            disabled={disabled}\n                            icon={<PlusOutlined />}\n                            onClick={addDate}\n                            type=\"dashed\"\n                        />\n                    </div>\n                </>\n            }\n        </div>\n    );\n}","import React, { useCallback, useContext, useEffect, useMemo } from 'react';\nimport { Select, Space } from 'antd';\n\nimport { appContext } from '../AppContext';\nimport { visibleHoursToHoursArray } from '../helper';\n\nexport function ReservationTimeSelect({\n    disabled = false,\n    from,\n    to, // don't use to.hour() to set new hour, as it can be bubbled to the next day\n    onFromChange,\n    onToChange,\n}) {\n    const { config: { visibleHours } } = useContext(appContext);\n\n    const hours = useMemo(() => visibleHoursToHoursArray(visibleHours), [visibleHours]);\n\n    const toHours = useMemo(() => hours.reduce((toHours, h) => {\n        if (h >= from.hour())\n            toHours.push(h + 1);\n        return toHours;\n    }, []), [from, hours]);\n\n    useEffect(() => {\n        if (from.isSame(to, 'hour'))\n            onToChange(from.add(1, 'hour'));\n    }, [from, to, onToChange]);\n\n    const handleFromChange = useCallback(newFromHour => {\n        const diff = Math.abs(to.diff(from, 'hour'));\n        let newToHour = newFromHour + diff;\n        if (!hours.includes(newToHour))\n            newToHour = hours[hours.length - 1] + 1;\n        onFromChange(from.hour(newFromHour));\n        onToChange(from.hour(newToHour));\n    }, [from, to, onFromChange, onToChange, hours]);\n\n    const handleToChange = useCallback(newToHour => {\n        onToChange(from.hour(newToHour));\n    }, [from, onToChange]);\n\n    return (\n        <Space direction=\"horizontal\" size=\"middle\">\n            <Select\n                bordered={false}\n                disabled={disabled}\n                onChange={handleFromChange}\n                size=\"large\"\n                value={from.hour()}\n            >\n                {hours.map(hour => (\n                    <Select.Option\n                        key={hour}\n                        value={hour}\n                    >\n                        {hour} Uhr\n                    </Select.Option>\n                ))}\n            </Select>\n\n            <span>bis</span>\n\n            <Select\n                bordered={false}\n                disabled={disabled}\n                onChange={handleToChange}\n                size=\"large\"\n                value={to.hour() === 0 ? 24 : to.hour()}\n            >\n                {toHours.map(hour => (\n                    <Select.Option\n                        key={hour}\n                        value={hour}\n                    >\n                        {hour % 24} Uhr\n                    </Select.Option>\n                ))}\n            </Select>\n        </Space>\n    );\n}","import { Button, Input, Radio } from 'antd';\nimport { DownOutlined, EditOutlined } from '@ant-design/icons';\nimport React, { useCallback, useContext, useState } from 'react';\n\nimport { DatePicker } from './DatePicker';\nimport { RepeatReservationForm } from './RepeatReservationForm';\nimport { ReservationDetails } from './ReservationDetails';\nimport { ReservationTimeSelect } from './ReservationTimeSelect';\nimport { ScrollRadioGroup } from './ScrollRadioGroup';\nimport { appContext } from '../AppContext';\nimport { authContext } from '../AuthContext';\nimport { getCourtName } from '../helper';\nimport styles from './ReservationDetailsForm.module.css';\n\nexport function ReservationDetailsForm({\n    courtId,\n    currentReservations,\n    disabled,\n    from,\n    onCourtIdChange,\n    onFromChange,\n    onReservationsChange,\n    onTextChange,\n    onToChange,\n    readOnly,\n    text,\n    to,\n    unavailableReservations,\n}) {\n    const { courts } = useContext(appContext);\n    const { user } = useContext(authContext);\n\n    const [editName, setEditName] = useState(false);\n    const handleEditName = useCallback(() => {\n        setEditName(true);\n    }, []);\n\n    const handleCancelEditName = useCallback(() => {\n        setEditName(false);\n        onTextChange(null);\n    }, [onTextChange]);\n\n    const handleDateChange = useCallback(date => {\n        const diff = Math.abs(to.diff(from, 'hour'));\n        const newFrom = date.hour(from.hour());\n        const newTo = newFrom.add(diff, 'hour');\n        onFromChange(newFrom);\n        onToChange(newTo);\n    }, [from, to, onFromChange, onToChange]);\n\n    const handleTextChange = useCallback(e => {\n        onTextChange(e.target.value);\n    }, [onTextChange]);\n\n    const handleCourtIdChange = useCallback(e => {\n        onCourtIdChange(e.target.value);\n    }, [onCourtIdChange]);\n\n    if (readOnly)\n        return (\n            <ReservationDetails\n                court={\n                    <div className={styles.plain}>\n                        {getCourtName(courts, courtId)}\n                    </div>\n                }\n                date={\n                    <div className={styles.plain}>\n                        {from.format('dd[\\xa0]L')}\n                    </div>\n                }\n                time={\n                    <div className={styles.plain}>\n                        {from.format('H')} Uhr bis {to.format('H')} Uhr\n                    </div>\n                }\n                name={\n                    <div className={styles.plain}>\n                        {currentReservations?.[0]?.text || currentReservations?.[0]?.name || user.name}\n                    </div>\n                }\n            />\n\n        );\n\n    return (\n        <ReservationDetails\n            court={\n                <ScrollRadioGroup\n                    disabled={disabled}\n                    onChange={handleCourtIdChange}\n                    value={courtId}\n                >\n                    {courts.map(({ courtId, name }) => (\n                        <Radio.Button key={courtId} value={courtId}>{name}</Radio.Button>\n                    ))}\n                </ScrollRadioGroup>\n            }\n            date={\n                <DatePicker\n                    allowClear={false}\n                    bordered={false}\n                    className={styles.datePicker}\n                    disabled={currentReservations?.length > 1 || disabled}\n                    format=\"L\"\n                    onChange={handleDateChange}\n                    showToday={false}\n                    suffixIcon={<DownOutlined />}\n                    value={from}\n                />\n            }\n            time={\n                <ReservationTimeSelect\n                    disabled={disabled}\n                    from={from}\n                    to={to}\n                    onFromChange={onFromChange}\n                    onToChange={onToChange}\n                />\n            }\n            name={editName ?\n                (\n                    <>\n                        <Input\n                            className={styles.nameInput}\n                            disabled={disabled}\n                            onChange={handleTextChange}\n                            placeholder=\"z.B. Training, ...\"\n                            value={text}\n                            size=\"large\"\n                        />\n                        <Button\n                            disabled={disabled}\n                            onClick={handleCancelEditName}\n                            type='link'\n                        >\n                            abbrechen\n                        </Button>\n                    </>\n                ) : (\n                    <>\n                        <div className={styles.plain}>\n                            <span>\n                                {currentReservations?.[0]?.text || currentReservations?.[0]?.name || user.name}\n                            </span>\n                        </div>\n                        {user.admin &&\n                            <Button\n                                disabled={disabled}\n                                onClick={handleEditName}\n                                type='link'\n                            >\n                                <EditOutlined /> bearbeiten\n                            </Button>\n                        }\n                    </>\n                )\n            }\n            repeat={\n                <RepeatReservationForm\n                    courtId={courtId}\n                    currentReservations={currentReservations}\n                    disabled={disabled}\n                    from={from}\n                    onChange={onReservationsChange}\n                    to={to}\n                    unavailableReservations={unavailableReservations}\n                />\n            }\n        />\n    );\n}","import { Button, Form, Input, Modal, Radio, message } from 'antd';\nimport React, { useCallback, useContext, useEffect, useMemo, useRef, useState } from 'react';\nimport { getReservationsApi, patchReservationGroupApi, postReservationGroupApi } from '../api';\n\nimport { Ball } from '../Ball';\nimport { ErrorResult } from '../ErrorResult';\nimport { ExclamationCircleOutlined } from '@ant-design/icons';\nimport { RESERVATION_TYPES } from '../ReservationTypes';\nimport { ReservationDetailsForm } from './ReservationDetailsForm';\nimport { StatusText } from '../admin/StatusText';\nimport { appContext } from '../AppContext';\nimport { authContext } from '../AuthContext';\nimport dayjs from 'dayjs';\nimport { getCourtName } from '../helper';\nimport styles from './ReservationGroupModal.module.css';\nimport { useApi } from '../useApi';\n\nexport function ReservationGroupModal({\n    initialCourtId,\n    initialFrom,\n    initialTo,\n    reservation,\n    onFinish,\n    setReservations: setOuterReservations,\n}) {\n    const { courts, templates: { reservationTos } } = useContext(appContext);\n    const { user } = useContext(authContext);\n\n    const [changeReason, setChangeReason] = useState('');\n    const [text, setText] = useState(null);\n    const [reservations, setReservations] = useState(null);\n    const [from, setFrom] = useState(reservation?.from || initialFrom);\n    const [to, setTo] = useState(reservation?.to || initialTo);\n    const [courtId, setCourtId] = useState(reservation?.courtId || initialCourtId);\n    const prevErrorRef = useRef({});\n\n    const [groupReservations, setGroupReservations] = useState([]);\n    const [state, getGroupReservations] = useApi(getReservationsApi, setGroupReservations);\n\n    const [postState, postReservationGroup] = useApi(postReservationGroupApi, setOuterReservations);\n    const [patchState, patchReservationGroup] = useApi(patchReservationGroupApi, setOuterReservations);\n\n    const loading = state.loading || postState.loading || patchState.loading;\n\n    const adminEdit = reservation && user.admin && reservation?.userId !== user.userId;\n    const canEdit = user.admin || !reservation || reservation.userId === user.userId;\n\n    const newReservations = useMemo(() => reservations?.filter(\n        r => !groupReservations.some(gr => gr.from.isSame(r.from, 'hour') && gr.to.isSame(r.to, 'hour'))\n    ), [reservations, groupReservations]);\n    const cancelReservations = useMemo(() => reservations && groupReservations.filter(\n        gr => !reservations.some(r => r.from.isSame(gr.from, 'hour') && r.to.isSame(gr.to, 'hour'))\n    ), [reservations, groupReservations]);\n    const changeText = !!(groupReservations && text);\n\n    const unavailableReservations = useMemo(() => {\n        let uaRes = postState.error?.unavailableReservations || patchState.error?.unavailableReservations;\n        if (uaRes)\n            uaRes = uaRes.map(({ courtId, from, to }) => ({\n                courtId,\n                from: dayjs(from),\n                to: dayjs(to),\n            }));\n        return uaRes;\n    }, [patchState.error?.unavailableReservations, postState.error?.unavailableReservations]);\n\n    useEffect(() => {\n        if (reservation?.groupId)\n            getGroupReservations({ query: { 'group-id': reservation?.groupId } });\n    }, [reservation, getGroupReservations]);\n\n    const handleChangeChangeReason = useCallback(e => {\n        setChangeReason(e.target.value);\n    }, []);\n\n    const handlePostReservation = useCallback(() => {\n        const doPost = () => {\n            postReservationGroup(null, {\n                reservations,\n                text,\n                type: RESERVATION_TYPES.NORMAL,\n            }, () => {\n                message.success(\"Reservierung erfolgreich\");\n                onFinish();\n            });\n        };\n\n        Modal.confirm({\n            icon: false,\n            okText: 'Akzeptieren',\n            width: 530,\n            centered: true,\n            content: (\n                <div dangerouslySetInnerHTML={{ __html: reservationTos.body }} />\n            ),\n            onOk: doPost,\n        });\n    }, [\n        onFinish,\n        postReservationGroup,\n        reservations,\n        reservationTos,\n        text,\n    ]);\n\n    const handleChangeReservation = useCallback(() => {\n        const doChange = () => {\n            patchReservationGroup({\n                path: {\n                    groupId: reservation.groupId\n                }\n            }, {\n                reason: adminEdit ? changeReason : undefined,\n                reservations,\n                text,\n            }, () => {\n                message.success(\"Speichern erfolgreich\");\n                onFinish();\n            });\n        };\n\n        Modal.confirm({\n            title: 'Wirklich speichern?',\n            icon: <ExclamationCircleOutlined />,\n            centered: true,\n            content: (\n                <div className={styles.wrapper}>\n\n                    {newReservations.length > 0 &&\n                        <>\n                            <div className={styles.heading}>Neue Termine</div>\n                            <ul>\n                                {newReservations.map(({ courtId, from, to }) => (\n                                    <li key={from}>{from.format('dd[\\xa0]L')}, {from.hour()}&nbsp;bis&nbsp;{to.hour()}&nbsp;Uhr, {getCourtName(courts, courtId)}</li>\n                                ))}\n                            </ul>\n                        </>\n                    }\n\n                    {cancelReservations.length > 0 &&\n                        <>\n                            <div className={styles.heading}>Zu Stornieren</div>\n                            <ul>\n                                {cancelReservations.map(({ courtId, from, to }) => (\n                                    <li key={from}>{from.format('dd[\\xa0]L')}, {from.hour()}&nbsp;bis&nbsp;{to.hour()}&nbsp;Uhr, {getCourtName(courts, courtId)}</li>\n                                ))}\n                            </ul>\n                        </>\n                    }\n\n                    {changeText &&\n                        <>\n                            <div className={styles.heading}>Änderungen</div>\n                            <ul>\n                                <li>Name: <strong>{text}</strong></li>\n                            </ul>\n                        </>\n                    }\n\n                </div>\n            ),\n            okText: 'Bestätigen',\n            okType: 'danger',\n            cancelText: 'Abbrechen',\n            onOk: doChange\n        });\n    }, [\n        adminEdit,\n        cancelReservations,\n        changeReason,\n        changeText,\n        courts,\n        newReservations,\n        onFinish,\n        patchReservationGroup,\n        reservation,\n        reservations,\n        text,\n    ]);\n\n\n    const handleCancelReservation = useCallback(() => {\n        let cancelType = 'single';\n\n        const handleCancelTypeChange = e => (cancelType = e.target.value);\n\n        const doDelete = () => {\n            const reqParams = {\n                path: {\n                    groupId: reservation.groupId\n                }\n            };\n            const cb = () => {\n                message.success(\"Stornierung erfolgreich\");\n                onFinish();\n            }\n\n            let reservations;\n            if (cancelType === 'single') {\n                reservations = groupReservations.filter(r => !r.from.isSame(reservation.from, 'day'));\n            } else if (cancelType === 'allActive') {\n                reservations = groupReservations.filter(r => r.from.isBefore(dayjs(), 'hour'));\n            } else {\n                reservations = [];\n            }\n\n            patchReservationGroup(reqParams, {\n                reason: adminEdit ? changeReason : undefined,\n                reservations,\n            }, cb);\n        };\n\n        if (groupReservations.length <= 1) {\n            doDelete();\n        } else {\n            Modal.confirm({\n                title: 'Termine stornieren',\n                icon: <ExclamationCircleOutlined />,\n                centered: true,\n                content: (\n                    <Radio.Group \n                        className={styles.cancelRadioGroup}\n                        onChange={handleCancelTypeChange}\n                        defaultValue={cancelType}\n                    >\n                        <Radio value=\"single\">Nur diesen Termin</Radio>\n                        <ul>\n                            <li key={reservation.from}>{reservation.from.format('dd[\\xa0]L')}, {reservation.from.hour()}&nbsp;bis&nbsp;{reservation.to.hour()}&nbsp;Uhr, {getCourtName(courts, reservation.courtId)}</li>\n                        </ul>\n                        <Radio value=\"allActive\">Alle offenen Termine</Radio>\n                        <ul>\n                            {groupReservations.filter(r => !r.from.isBefore(dayjs(), 'hour')).map(({ courtId, from, to }) => (\n                                <li key={from}>{from.format('dd[\\xa0]L')}, {from.hour()}&nbsp;bis&nbsp;{to.hour()}&nbsp;Uhr, {getCourtName(courts, courtId)}</li>\n                            ))}\n                        </ul>\n                        {user?.admin &&\n                            <>\n                                <Radio value=\"all\">Alle Termine</Radio>\n                                <ul>\n                                    {groupReservations.map(({ courtId, from, to }) => (\n                                        <li key={from}>{from.format('dd[\\xa0]L')}, {from.hour()}&nbsp;bis&nbsp;{to.hour()}&nbsp;Uhr, {getCourtName(courts, courtId)}</li>\n                                    ))}\n                                </ul>\n                            </>\n                        }\n                    </Radio.Group>\n                ),\n                okText: 'Stornieren',\n                okType: 'danger',\n                cancelText: 'Abbrechen',\n                onOk: doDelete,\n            });\n        }\n    }, [\n        adminEdit,\n        changeReason,\n        courts,\n        groupReservations,\n        onFinish,\n        patchReservationGroup,\n        reservation,\n        user?.admin,\n    ]);\n\n    useEffect(() => {\n        if (prevErrorRef.current.post === postState.error\n            && prevErrorRef.current.patch === patchState.error)\n            return;\n        prevErrorRef.current.post = postState.error;\n        prevErrorRef.current.patch = patchState.error;\n\n        const message = postState.error?.message || patchState.error?.message;\n        if (unavailableReservations) {\n            Modal.error({\n                centered: true,\n                title: 'Reservierung fehlgeschlagen',\n                content: (\n                    <div>\n                        <div>\n                            Folgende Termine sind nicht verfügbar:\n                        </div>\n                        <ul>\n                            {unavailableReservations.map(({ courtId, from, to }) => (\n                                <li key={from}>{from.format('dd[\\xa0]L')}, {from.hour()}&nbsp;bis&nbsp;{to.hour()}&nbsp;Uhr, {getCourtName(courts, courtId)}</li>\n                            ))}\n                        </ul>\n                    </div>\n                )\n            });\n        } else if (message === 'too many active reservations') {\n            const value = postState.error?.value || patchState.error?.value;\n            const max = postState.error?.max || patchState.error?.max;\n            const diff = Math.abs(value - max);\n            Modal.error({\n                centered: true,\n                title: 'Reservierungslimit erreicht',\n                content: (\n                    <div>\n                        {reservations?.length > diff ?\n                            (\n                                <p>\n                                    Bitte entfernen Sie mindestens <strong>{diff}</strong> Termine.\n                                </p>\n                            ) : (\n                                <p>\n                                    Sie können aktuell keine weiteren Termine reservieren.\n                                </p>\n                            )\n                        }\n                        <p>\n                            Es können maximal {max} Reservierungen im voraus getätigt werden. Bereits vergangene Termine werden dabei nicht angerechnet.\n                        </p>\n                    </div>\n                )\n            });\n        }\n    }, [courts, reservations?.length, postState.error, patchState.error, unavailableReservations])\n\n    if (\n        state.error\n        || (postState.error && !postState.error.unavailableReservations && postState.error.message !== 'too many active reservations')\n        || (patchState.error && !patchState.error.unavailableReservations && patchState.error.message !== 'too many active reservations')\n    ) {\n        return (\n            <Modal\n                title=\"Reservierung\"\n                visible={true}\n                centered\n                onCancel={onFinish}\n                onOk={onFinish}\n                footer={\n                    <div className={styles.footer}>\n                        <Button onClick={onFinish}>\n                            Abbrechen\n                        </Button>\n                    </div>\n                }\n            >\n                <div className={styles.wrapper}>\n                    <ErrorResult />\n                </div>\n            </Modal>\n        );\n    }\n\n    return (\n        <Modal\n            visible={true}\n            width={530}\n            centered\n            onCancel={onFinish}\n            onOk={onFinish}\n            footer={loading ?\n                (\n                    <StatusText\n                        loading\n                        text=\"Bitte warten...\"\n                    />\n                ) : (\n                    <div className={styles.footer}>\n                        <Button onClick={onFinish}>\n                            {canEdit ? 'Abbrechen' : 'Schließen'}\n                        </Button>\n                        {canEdit && (reservation ?\n                            (\n                                <>\n                                    <Button\n                                        type=\"danger\"\n                                        onClick={handleCancelReservation}\n                                        disabled={adminEdit && !changeReason}\n                                    >\n                                        Stornieren\n                                    </Button>\n                                    <Button\n                                        type=\"primary\"\n                                        onClick={handleChangeReservation}\n                                        disabled={\n                                            !(newReservations?.length || cancelReservations?.length || changeText)\n                                            || (adminEdit && !changeReason)\n                                        }\n                                    >\n                                        Speichern\n                                    </Button>\n                                </>\n                            ) : (\n                                <Button\n                                    disabled={!newReservations?.length}\n                                    type=\"primary\"\n                                    onClick={handlePostReservation}\n                                >\n                                    Reservieren\n                                </Button>\n                            )\n                        )}\n                    </div>\n                )\n            }\n        >\n            <div className={styles.wrapper}>\n                {state.loading ?\n                    (\n                        <Ball visible spin centered large />\n                    ) : (\n\n                        <ReservationDetailsForm\n                            courtId={courtId}\n                            currentReservations={groupReservations}\n                            disabled={loading}\n                            from={from}\n                            onCourtIdChange={setCourtId}\n                            onFromChange={setFrom}\n                            onReservationsChange={setReservations}\n                            onTextChange={setText}\n                            onToChange={setTo}\n                            readOnly={!canEdit}\n                            text={text}\n                            to={to}\n                            unavailableReservations={unavailableReservations}\n                        />\n                    )\n                }\n\n                {adminEdit &&\n                    <Form layout=\"vertical\">\n                        <Form.Item \n                            label=\"Grund der Änderung\"\n                            required\n                        >\n                            <Input.TextArea\n                                autoSize\n                                disabled={loading}\n                                onChange={handleChangeChangeReason}\n                                placeholder=\"Erforderlich\"\n                                required\n                                value={changeReason}\n                            />\n                            <div className={styles.changeReasonHint}>\n                                Der Inhaber der Reservierung wird über die Änderungen sowie dessen Grund per E-Mail informiert.\n                            </div>\n                        </Form.Item>\n                    </Form>\n                }\n            </div>\n        </Modal>\n    );\n}","import { Button, Modal, Result } from 'antd';\nimport React, { useCallback, useContext } from 'react';\n\nimport { authContext } from '../AuthContext';\nimport styles from './VerifyMailModal.module.css';\nimport { useHistory } from 'react-router-dom';\n\nexport function VerifyMailModal({\n    onClose\n}) {\n    const { user } = useContext(authContext);\n    const history = useHistory();\n\n    const handleChangeMailClick = useCallback(() => {\n        history.push('/profile');\n    }, [history]);\n    \n    const handleResendMail = useCallback(() => {\n        history.push('/verify-mail/send');\n    }, [history]);\n\n    return (\n        <Modal\n            title=\"E-Mail nicht verifiziert\"\n            visible={true}\n            centered\n            width={580}\n            onCancel={onClose}\n            onOk={onClose}\n            footer={null}\n        >\n            <Result\n                status=\"warning\"\n                title=\"Bitte bestätigen Sie Ihre E-Mail Adresse\"\n                extra={\n                    <div>\n                        <div>\n                            Klicken Sie auf den Bestätigungslink, den Sie bei Ihrer Registrierung an <strong>{user?.mail}</strong> erhalten haben.\n                        </div>\n                        <div className={styles.buttons}>\n                            <Button type=\"primary\" onClick={handleResendMail}>\n                                Bestätigungslink erneut senden\n                            </Button>\n                            <Button type=\"link\" onClick={handleChangeMailClick}>\n                                E-Mail Adresse ändern\n                            </Button>\n                        </div>\n                    </div>\n                }\n            />\n        </Modal>\n    );\n}","import React, { useContext } from 'react';\n\nimport { DisableReservationGroupModal } from './DisableReservationGroupModal';\nimport { LoginModal } from '../user/LoginModal';\nimport { RESERVATION_TYPES } from '../ReservationTypes';\nimport { ReservationGroupModal } from './ReservationGroupModal';\nimport { VerifyMailModal } from '../user/VerifyMailModal';\nimport { authContext } from '../AuthContext';\n\nexport function ReservationModal(props) {\n    \n    const { user } = useContext(authContext);\n    const { onFinish, reservation, type } = props;\n\n    if (!user)\n        return <LoginModal onClose={onFinish} />\n\n    if (!user.verified)\n        return <VerifyMailModal onClose={onFinish} />\n\n    if (reservation?.type === RESERVATION_TYPES.DISABLE || type === RESERVATION_TYPES.DISABLE)\n        return <DisableReservationGroupModal {...props} />;\n\n    return <ReservationGroupModal {...props} />;\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cell\":\"SlotCell_cell__10BAl\",\"enabled\":\"SlotCell_enabled__3WkTf\",\"alwaysClickable\":\"SlotCell_alwaysClickable__9sej8\",\"slot\":\"SlotCell_slot__2KRoY\",\"text\":\"SlotCell_text__1xoLV\",\"singleLine\":\"SlotCell_singleLine__22a8x\",\"reserved\":\"SlotCell_reserved__1oREX\",\"mine\":\"SlotCell_mine__Fe5AN\",\"loading\":\"SlotCell_loading__19J7J\",\"load\":\"SlotCell_load__YLQlz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"DayTable_wrapper__1Hl5M\",\"col\":\"DayTable_col__1XNy5\",\"cols\":\"DayTable_cols__3g9Sf\",\"date\":\"DayTable_date__3HnYm\",\"today\":\"DayTable_today__3s1dj\",\"court\":\"DayTable_court__3mDRl\",\"body\":\"DayTable_body__27nsw\",\"blur\":\"DayTable_blur__1Rzxw\",\"infoOverlay\":\"DayTable_infoOverlay__2JlXg\",\"linkButton\":\"DayTable_linkButton__3jjgW\",\"adminAction\":\"DayTable_adminAction__3kbRX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"HoursTable_wrapper__1o48U\",\"hour\":\"HoursTable_hour__2iAsO\",\"to\":\"HoursTable_to__U0x1y\",\"highlight\":\"HoursTable_highlight__16BlN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"ReservationCalendar_wrapper__r-AWI\",\"tableWrapper\":\"ReservationCalendar_tableWrapper__Zzm8d\",\"tableScroller\":\"ReservationCalendar_tableScroller__1fVFR\"};","import React, { useCallback, useContext } from 'react';\n\nimport { RESERVATION_TYPES } from '../ReservationTypes';\nimport { authContext } from '../AuthContext';\nimport classNames from 'classnames/bind';\nimport styles from './SlotCell.module.css';\n\nconst cn = classNames.bind(styles);\n\nconst SLOT_HEIGHT_PX = 32;\nconst CELL_PADDING_PX = 3;\n\nexport function SlotCell({\n    alwaysClickable = false,\n    baseRowSpan,\n    courtId,\n    courtName,\n    from,\n    to,\n    rowIndex,\n    rows,\n    disabled = false,\n    loading = false,\n    onClick,\n    reservation,\n}) {\n    const { user } = useContext(authContext);\n\n    const handleClick = useCallback(() => {\n        if (alwaysClickable || (!disabled && reservation?.type !== RESERVATION_TYPES.DISABLE))\n            onClick({ courtId, from, to, reservation });\n    }, [alwaysClickable, courtId, from, to, disabled, onClick, reservation]);\n\n    let rowSpan = baseRowSpan;\n    if (reservation) {\n        if (reservation.from.isBefore(from, 'hour') && rowIndex !== 0) {\n            rowSpan = 0;\n        } else {\n            const maxRowSpan = (rows[rows.length - 1].to.hour() || 24) - from.hour();\n            if (from.isSame(reservation.to, 'day')) {\n                const diff = reservation.to.diff(from, 'hour');\n                rowSpan = 0;\n                for (let i = rowIndex; i < rowIndex + diff; ++i)\n                    rowSpan += rows[i].span;\n            } else {\n                rowSpan = maxRowSpan;\n            }\n        }\n    }\n\n    if (rowSpan === 0)\n        return null;\n\n    return (\n        <div\n            className={cn({\n                alwaysClickable,\n                cell: true,\n                enabled: !disabled && reservation?.type !== RESERVATION_TYPES.DISABLE,\n            })}\n            style={{ padding: CELL_PADDING_PX }}\n            onClick={handleClick}\n        >\n            <div\n                className={cn({\n                    slot: true,\n                    loading,\n                    reserved: reservation?.type === RESERVATION_TYPES.NORMAL,\n                    mine: user && user?.userId === reservation?.userId,\n                })}\n                style={{ height: SLOT_HEIGHT_PX * rowSpan + CELL_PADDING_PX * 2 * (rowSpan - 1) }}\n                data-free-text=\"Frei\"\n                data-free-text-hover={`${from.hour()} Uhr, ${courtName}`}\n            >\n                <div className={cn({\n                    text: true,\n                    singleLine: rowSpan === 1,\n                })}>\n                    {reservation && (reservation.type === RESERVATION_TYPES.DISABLE ?\n                        (\n                            <>\n                                <div>Gesperrt</div>\n                                <div>{reservation.text}</div>\n                            </>\n                        ) : (\n                            <div>{reservation.text || reservation.name}</div>\n                        )\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n}\n","import React, { useCallback, useContext, useEffect, useMemo, useState } from 'react';\nimport { findReservation, visibleHoursToLocalizedHourRange } from '../helper';\n\nimport { Button } from 'antd';\nimport { SlotCell } from './SlotCell';\nimport { appContext } from '../AppContext';\nimport { authContext } from '../AuthContext';\nimport classNames from 'classnames/bind';\nimport styles from './DayTable.module.css';\nimport { useTime } from './useTime';\n\nconst cn = classNames.bind(styles);\n\nexport function DayTable({\n    courts,\n    date,\n    loading,\n    onDisableCourtClick,\n    onSlotClick,\n    reservationDaysInAdvance,\n    reservations,\n}) {\n    const { config: { visibleHours } } = useContext(appContext);\n    const { user } = useContext(authContext);\n    const [disableOverlay, setDisableOverlay] = useState(false);\n    useEffect(() => setDisableOverlay(false), [user]);\n\n    const now = useTime('hour');\n\n    const isToday = useMemo(() => now.isSame(date, 'day'), [date, now]);\n    const tooFarAhead = useMemo(() =>\n        date.isAfter(now.add(reservationDaysInAdvance, 'day'), 'day'), [date, now, reservationDaysInAdvance]);\n    const reservableAsOf = useMemo(() => date.subtract(reservationDaysInAdvance, 'day').format('L'), [date, reservationDaysInAdvance]);\n\n    const showInfoOverlay = !disableOverlay && tooFarAhead;\n\n    const rows = useMemo(() => (\n        visibleHoursToLocalizedHourRange(date, visibleHours)\n    ), [date, visibleHours]);\n\n    const handleDisableOverlayClick = useCallback(() => setDisableOverlay(true), []);\n\n    const handleDisableCourtClick = (courtId) => {\n        onDisableCourtClick({\n            courtId,\n            from: date.hour(0),\n            to: date.hour(24),\n        });\n    };\n\n    return (\n        <div className={styles.wrapper}>\n            <div className={styles.date}>\n                {isToday && <span className={styles.today}>Heute</span>}\n                {date.format('dd[\\xa0]L')}\n            </div>\n\n            <div className={styles.cols}>\n                {courts.map(({ courtId, name }) => (\n                    <div key={courtId} className={styles.court}>\n                        {name}\n                    </div>\n                ))}\n            </div>\n\n            <div className={cn('body', 'cols')}>\n                {courts.map(({ courtId, name }) => (\n                    <div\n                        key={courtId}\n                        className={cn({ \n                            col: true,\n                            blur: showInfoOverlay \n                        })}\n                    >\n                        {rows.map(({ from, to, span }, i) => (\n                            <SlotCell\n                                alwaysClickable={user?.admin}\n                                courtId={courtId}\n                                courtName={name}\n                                rowIndex={i}\n                                rows={rows}\n                                from={from}\n                                to={to}\n                                baseRowSpan={span}\n                                disabled={from.isBefore(now, 'hour')}\n                                key={from}\n                                loading={loading}\n                                onClick={onSlotClick}\n                                reservation={findReservation(reservations, from, to, courtId)}\n                            />\n                        ))}\n                        {user?.admin &&\n                            <div className={styles.adminAction}>\n                                <Button\n                                    type=\"link\"\n                                    onClick={() => handleDisableCourtClick(courtId)}\n                                >\n                                    Sperren\n                                </Button>\n                            </div>\n                        }\n                    </div>\n                ))}\n\n                {showInfoOverlay &&\n                    <div className={styles.infoOverlay}>\n                        <div>Reservierbar<br />ab {reservableAsOf}</div>\n                        {user?.admin &&\n                            <Button\n                                className={styles.linkButton}\n                                type=\"link\"\n                                onClick={handleDisableOverlayClick}\n                            >\n                                Trotzdem reservieren<br />(Trainer/Admin)\n                            </Button>\n                        }\n                    </div>\n                }\n            </div>\n        </div>\n    );\n}\n","import React, { useContext, useMemo } from 'react';\n\nimport { appContext } from '../AppContext';\nimport classNames from 'classnames/bind';\nimport styles from './HoursTable.module.css';\nimport { useTime } from './useTime';\nimport { visibleHoursToHoursArray } from '../helper';\n\nconst cn = classNames.bind(styles);\n\nexport function HoursTable({\n    highlightHour,\n}) {\n    const { config: { visibleHours } } = useContext(appContext);\n\n    const now = useTime('hour');\n\n    const hours = useMemo(() => visibleHoursToHoursArray(visibleHours), [visibleHours]);\n\n    return (\n        <div className={styles.wrapper}>\n            {hours.map(hour => (\n                <div \n                    key={hour} \n                    className={cn({ \n                        hour: true,\n                        highlight: highlightHour && now.hour() === hour\n                    })}\n                >\n                    {hour} Uhr<br />\n                    <span className={styles.to}>bis {(hour + 1) % 24} Uhr</span>\n                </div>\n            ))}\n        </div>\n    );\n}","import React, { useCallback, useContext, useEffect, useMemo, useRef, useState } from 'react';\n\nimport { DayTable } from './DayTable';\nimport { ErrorResult } from '../ErrorResult';\nimport { HoursTable } from './HoursTable';\nimport { RESERVATION_TYPES } from '../ReservationTypes';\nimport { ReservationModal } from './ReservationModal';\nimport { UPDATE_INTERVALS_SEC } from '../updateIntervals';\nimport { appContext } from '../AppContext';\nimport { getReservationsApi } from '../api';\nimport styles from './ReservationCalendar.module.css';\nimport { useApi } from '../useApi';\nimport { useTime } from './useTime';\nimport { useUpdateEffect } from '../useUpdateEffect';\n\nconst VISIBLE_DATES_COUNT = 7; // week\n\nexport function ReservationCalendar({\n    kiosk = false,\n    selectedDate,\n}) {\n    const { courts, config: { reservationDaysInAdvance } } = useContext(appContext);\n\n    const today = useTime('day');\n\n    const [selectedSlot, setSelectedSlot] = useState();\n    const scrollerRef = useRef();\n\n    const [reservations, setReservations] = useState(null);\n    const [state, getReservations] = useApi(getReservationsApi, setReservations); \n\n    const updateReservations = useCallback(() => getReservations({\n        query: {\n            start: selectedDate.startOf('week').toISOString(),\n            end: selectedDate.endOf('week').toISOString(),\n        }\n    }), [selectedDate, getReservations]);\n\n    useUpdateEffect(updateReservations, UPDATE_INTERVALS_SEC.RESERVATIONS);\n\n    useEffect(() => {\n        setReservations(null);\n        updateReservations();\n    }, [updateReservations]);\n\n    const visibleDates = useMemo(() => Array.from(Array(VISIBLE_DATES_COUNT)).map((_, i) =>\n        selectedDate.startOf('week').add(i, 'day') // startOf also sets hours, mins, secs to zero\n    ), [selectedDate]);\n\n    // scroll automatically to today's date\n    useEffect(() => {\n        if (!scrollerRef.current)\n            return;\n        if (selectedDate.isSame(today, 'week')) {\n            const index = Math.abs(today.startOf('week').diff(today, 'day'));\n            requestAnimationFrame(() => {\n                scrollerRef.current.scrollLeft\n                    = ((scrollerRef.current.scrollWidth) / VISIBLE_DATES_COUNT) * index;\n            });\n        } else {\n            requestAnimationFrame(() => {\n                scrollerRef.current.scrollLeft = 0;\n            });\n        }\n    }, [selectedDate, today]);\n\n    const handleSlotClicked = useCallback(selectedSlot => {\n        if (!kiosk)\n            setSelectedSlot(selectedSlot);\n    }, [kiosk]);\n\n    const handleDisableCourtClicked = useCallback(selectedSlot => {\n        setSelectedSlot({ \n            ...selectedSlot,\n            type: RESERVATION_TYPES.DISABLE,\n        });\n    }, []);\n\n    const handleReservationFinish = useCallback(() => {\n        setSelectedSlot(null);\n    }, []);\n\n    if (state.error)\n        return (\n            <div className={styles.tableWrapper}>\n                <ErrorResult />\n            </div>\n        );\n\n    return (\n        <div className={styles.wrapper}>\n            <div className={styles.tableWrapper}>\n                <HoursTable\n                    highlightHour={selectedDate.isSame(today, 'week')}\n                />\n\n                <div className={styles.tableScroller} ref={scrollerRef}>\n                    {visibleDates.map(date => (\n                        <DayTable\n                            courts={courts}\n                            date={date}\n                            key={date}\n                            loading={!reservations}\n                            onDisableCourtClick={handleDisableCourtClicked}\n                            onSlotClick={handleSlotClicked}\n                            reservationDaysInAdvance={reservationDaysInAdvance}\n                            reservations={reservations}\n                        />\n                    ))}\n                </div>\n            </div>\n\n            {selectedSlot &&\n                <ReservationModal\n                    initialCourtId={selectedSlot?.courtId}\n                    initialFrom={selectedSlot?.from}\n                    initialTo={selectedSlot?.to}\n                    reservation={selectedSlot?.reservation}\n                    type={selectedSlot?.type}\n                    onFinish={handleReservationFinish}\n                    setReservations={setReservations}\n                />\n            }\n        </div>\n    );\n}","module.exports = {\n\tMODE_NUMBER :\t\t1 << 0,\n\tMODE_ALPHA_NUM : \t1 << 1,\n\tMODE_8BIT_BYTE : \t1 << 2,\n\tMODE_KANJI :\t\t1 << 3\n};\n","module.exports = {\n\tL : 1,\n\tM : 0,\n\tQ : 3,\n\tH : 2\n};\n\n","var math = require('./math');\n\nfunction QRPolynomial(num, shift) {\n\n\tif (num.length == undefined) {\n\t\tthrow new Error(num.length + \"/\" + shift);\n\t}\n\n\tvar offset = 0;\n\n\twhile (offset < num.length && num[offset] == 0) {\n\t\toffset++;\n\t}\n\n\tthis.num = new Array(num.length - offset + shift);\n\tfor (var i = 0; i < num.length - offset; i++) {\n\t\tthis.num[i] = num[i + offset];\n\t}\n}\n\nQRPolynomial.prototype = {\n\n\tget : function(index) {\n\t\treturn this.num[index];\n\t},\n\t\n\tgetLength : function() {\n\t\treturn this.num.length;\n\t},\n\t\n\tmultiply : function(e) {\n\t\n\t\tvar num = new Array(this.getLength() + e.getLength() - 1);\n\t\n\t\tfor (var i = 0; i < this.getLength(); i++) {\n\t\t\tfor (var j = 0; j < e.getLength(); j++) {\n\t\t\t\tnum[i + j] ^= math.gexp(math.glog(this.get(i) ) + math.glog(e.get(j) ) );\n\t\t\t}\n\t\t}\n\t\n\t\treturn new QRPolynomial(num, 0);\n\t},\n\t\n\tmod : function(e) {\n\t\n\t\tif (this.getLength() - e.getLength() < 0) {\n\t\t\treturn this;\n\t\t}\n\t\n\t\tvar ratio = math.glog(this.get(0) ) - math.glog(e.get(0) );\n\t\n\t\tvar num = new Array(this.getLength() );\n\t\t\n\t\tfor (var i = 0; i < this.getLength(); i++) {\n\t\t\tnum[i] = this.get(i);\n\t\t}\n\t\t\n\t\tfor (var i = 0; i < e.getLength(); i++) {\n\t\t\tnum[i] ^= math.gexp(math.glog(e.get(i) ) + ratio);\n\t\t}\n\t\n\t\t// recursive call\n\t\treturn new QRPolynomial(num, 0).mod(e);\n\t}\n};\n\nmodule.exports = QRPolynomial;\n","var QRMath = {\n\n\tglog : function(n) {\n\t\n\t\tif (n < 1) {\n\t\t\tthrow new Error(\"glog(\" + n + \")\");\n\t\t}\n\t\t\n\t\treturn QRMath.LOG_TABLE[n];\n\t},\n\t\n\tgexp : function(n) {\n\t\n\t\twhile (n < 0) {\n\t\t\tn += 255;\n\t\t}\n\t\n\t\twhile (n >= 256) {\n\t\t\tn -= 255;\n\t\t}\n\t\n\t\treturn QRMath.EXP_TABLE[n];\n\t},\n\t\n\tEXP_TABLE : new Array(256),\n\t\n\tLOG_TABLE : new Array(256)\n\n};\n\t\nfor (var i = 0; i < 8; i++) {\n\tQRMath.EXP_TABLE[i] = 1 << i;\n}\nfor (var i = 8; i < 256; i++) {\n\tQRMath.EXP_TABLE[i] = QRMath.EXP_TABLE[i - 4]\n\t\t^ QRMath.EXP_TABLE[i - 5]\n\t\t^ QRMath.EXP_TABLE[i - 6]\n\t\t^ QRMath.EXP_TABLE[i - 8];\n}\nfor (var i = 0; i < 255; i++) {\n\tQRMath.LOG_TABLE[QRMath.EXP_TABLE[i] ] = i;\n}\n\nmodule.exports = QRMath;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"DateClock_wrapper__2wdCe\",\"time\":\"DateClock_time__1UaS1\",\"date\":\"DateClock_date__2fu_M\",\"clockDots\":\"DateClock_clockDots__1qZO2\",\"blink\":\"DateClock_blink__dDypK\"};","'use strict';\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar React = require('react');\n\nvar PropTypes = require('prop-types'); // qr.js doesn't handle error level of zero (M) so we need to do it right,\n// thus the deep require.\n\n\nvar QRCodeImpl = require('qr.js/lib/QRCode');\n\nvar ErrorCorrectLevel = require('qr.js/lib/ErrorCorrectLevel'); // TODO: pull this off of the QRCode class type so it matches.\n\n\n// Convert from UTF-16, forcing the use of byte-mode encoding in our QR Code.\n// This allows us to encode Hanji, Kanji, emoji, etc. Ideally we'd do more\n// detection and not resort to byte-mode if possible, but we're trading off\n// a smaller library for a smaller amount of data we can potentially encode.\n// Based on http://jonisalonen.com/2012/from-utf-16-to-utf-8-in-javascript/\nfunction convertStr(str) {\n  var out = '';\n\n  for (var i = 0; i < str.length; i++) {\n    var charcode = str.charCodeAt(i);\n\n    if (charcode < 0x0080) {\n      out += String.fromCharCode(charcode);\n    } else if (charcode < 0x0800) {\n      out += String.fromCharCode(0xc0 | charcode >> 6);\n      out += String.fromCharCode(0x80 | charcode & 0x3f);\n    } else if (charcode < 0xd800 || charcode >= 0xe000) {\n      out += String.fromCharCode(0xe0 | charcode >> 12);\n      out += String.fromCharCode(0x80 | charcode >> 6 & 0x3f);\n      out += String.fromCharCode(0x80 | charcode & 0x3f);\n    } else {\n      // This is a surrogate pair, so we'll reconsitute the pieces and work\n      // from that\n      i++;\n      charcode = 0x10000 + ((charcode & 0x3ff) << 10 | str.charCodeAt(i) & 0x3ff);\n      out += String.fromCharCode(0xf0 | charcode >> 18);\n      out += String.fromCharCode(0x80 | charcode >> 12 & 0x3f);\n      out += String.fromCharCode(0x80 | charcode >> 6 & 0x3f);\n      out += String.fromCharCode(0x80 | charcode & 0x3f);\n    }\n  }\n\n  return out;\n}\n\nvar DEFAULT_PROPS = {\n  size: 128,\n  level: 'L',\n  bgColor: '#FFFFFF',\n  fgColor: '#000000',\n  includeMargin: false\n};\nvar PROP_TYPES = process.env.NODE_ENV !== 'production' ? {\n  value: PropTypes.string.isRequired,\n  size: PropTypes.number,\n  level: PropTypes.oneOf(['L', 'M', 'Q', 'H']),\n  bgColor: PropTypes.string,\n  fgColor: PropTypes.string,\n  includeMargin: PropTypes.bool,\n  imageSettings: PropTypes.shape({\n    src: PropTypes.string.isRequired,\n    height: PropTypes.number.isRequired,\n    width: PropTypes.number.isRequired,\n    excavate: PropTypes.bool,\n    x: PropTypes.number,\n    y: PropTypes.number\n  })\n} : {};\nvar MARGIN_SIZE = 4; // This is *very* rough estimate of max amount of QRCode allowed to be covered.\n// It is \"wrong\" in a lot of ways (area is a terrible way to estimate, it\n// really should be number of modules covered), but if for some reason we don't\n// get an explicit height or width, I'd rather default to something than throw.\n\nvar DEFAULT_IMG_SCALE = 0.1;\n\nfunction generatePath(modules) {\n  var margin = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var ops = [];\n  modules.forEach(function (row, y) {\n    var start = null;\n    row.forEach(function (cell, x) {\n      if (!cell && start !== null) {\n        // M0 0h7v1H0z injects the space with the move and drops the comma,\n        // saving a char per operation\n        ops.push(\"M\".concat(start + margin, \" \").concat(y + margin, \"h\").concat(x - start, \"v1H\").concat(start + margin, \"z\"));\n        start = null;\n        return;\n      } // end of row, clean up or skip\n\n\n      if (x === row.length - 1) {\n        if (!cell) {\n          // We would have closed the op above already so this can only mean\n          // 2+ light modules in a row.\n          return;\n        }\n\n        if (start === null) {\n          // Just a single dark module.\n          ops.push(\"M\".concat(x + margin, \",\").concat(y + margin, \" h1v1H\").concat(x + margin, \"z\"));\n        } else {\n          // Otherwise finish the current line.\n          ops.push(\"M\".concat(start + margin, \",\").concat(y + margin, \" h\").concat(x + 1 - start, \"v1H\").concat(start + margin, \"z\"));\n        }\n\n        return;\n      }\n\n      if (cell && start === null) {\n        start = x;\n      }\n    });\n  });\n  return ops.join('');\n} // We could just do this in generatePath, except that we want to support\n// non-Path2D canvas, so we need to keep it an explicit step.\n\n\nfunction excavateModules(modules, excavation) {\n  return modules.slice().map(function (row, y) {\n    if (y < excavation.y || y >= excavation.y + excavation.h) {\n      return row;\n    }\n\n    return row.map(function (cell, x) {\n      if (x < excavation.x || x >= excavation.x + excavation.w) {\n        return cell;\n      }\n\n      return false;\n    });\n  });\n}\n\nfunction getImageSettings(props, cells) {\n  var imageSettings = props.imageSettings,\n      size = props.size,\n      includeMargin = props.includeMargin;\n\n  if (imageSettings == null) {\n    return null;\n  }\n\n  var margin = includeMargin ? MARGIN_SIZE : 0;\n  var numCells = cells.length + margin * 2;\n  var defaultSize = Math.floor(size * DEFAULT_IMG_SCALE);\n  var scale = numCells / size;\n  var w = (imageSettings.width || defaultSize) * scale;\n  var h = (imageSettings.height || defaultSize) * scale;\n  var x = imageSettings.x == null ? cells.length / 2 - w / 2 : imageSettings.x * scale;\n  var y = imageSettings.y == null ? cells.length / 2 - h / 2 : imageSettings.y * scale;\n  var excavation = null;\n\n  if (imageSettings.excavate) {\n    var floorX = Math.floor(x);\n    var floorY = Math.floor(y);\n    var ceilW = Math.ceil(w + x - floorX);\n    var ceilH = Math.ceil(h + y - floorY);\n    excavation = {\n      x: floorX,\n      y: floorY,\n      w: ceilW,\n      h: ceilH\n    };\n  }\n\n  return {\n    x: x,\n    y: y,\n    h: h,\n    w: w,\n    excavation: excavation\n  };\n} // For canvas we're going to switch our drawing mode based on whether or not\n// the environment supports Path2D. We only need the constructor to be\n// supported, but Edge doesn't actually support the path (string) type\n// argument. Luckily it also doesn't support the addPath() method. We can\n// treat that as the same thing.\n\n\nvar SUPPORTS_PATH2D = function () {\n  try {\n    new Path2D().addPath(new Path2D());\n  } catch (e) {\n    return false;\n  }\n\n  return true;\n}();\n\nvar QRCodeCanvas =\n/*#__PURE__*/\nfunction (_React$PureComponent) {\n  _inherits(QRCodeCanvas, _React$PureComponent);\n\n  function QRCodeCanvas() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, QRCodeCanvas);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(QRCodeCanvas)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"_canvas\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_image\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      imgLoaded: false\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleImageLoad\", function () {\n      _this.setState({\n        imgLoaded: true\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(QRCodeCanvas, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.update();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      this.update();\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      var _this$props = this.props,\n          value = _this$props.value,\n          size = _this$props.size,\n          level = _this$props.level,\n          bgColor = _this$props.bgColor,\n          fgColor = _this$props.fgColor,\n          includeMargin = _this$props.includeMargin,\n          imageSettings = _this$props.imageSettings; // We'll use type===-1 to force QRCode to automatically pick the best type\n\n      var qrcode = new QRCodeImpl(-1, ErrorCorrectLevel[level]);\n      qrcode.addData(convertStr(value));\n      qrcode.make();\n\n      if (this._canvas != null) {\n        var canvas = this._canvas;\n        var ctx = canvas.getContext('2d');\n\n        if (!ctx) {\n          return;\n        }\n\n        var cells = qrcode.modules;\n\n        if (cells === null) {\n          return;\n        }\n\n        var margin = includeMargin ? MARGIN_SIZE : 0;\n        var numCells = cells.length + margin * 2;\n        var calculatedImageSettings = getImageSettings(this.props, cells);\n\n        if (imageSettings != null && calculatedImageSettings != null) {\n          if (calculatedImageSettings.excavation != null) {\n            cells = excavateModules(cells, calculatedImageSettings.excavation);\n          }\n        } // We're going to scale this so that the number of drawable units\n        // matches the number of cells. This avoids rounding issues, but does\n        // result in some potentially unwanted single pixel issues between\n        // blocks, only in environments that don't support Path2D.\n\n\n        var pixelRatio = window.devicePixelRatio || 1;\n        canvas.height = canvas.width = size * pixelRatio;\n        var scale = size / numCells * pixelRatio;\n        ctx.scale(scale, scale); // Draw solid background, only paint dark modules.\n\n        ctx.fillStyle = bgColor;\n        ctx.fillRect(0, 0, numCells, numCells);\n        ctx.fillStyle = fgColor;\n\n        if (SUPPORTS_PATH2D) {\n          // $FlowFixMe: Path2D c'tor doesn't support args yet.\n          ctx.fill(new Path2D(generatePath(cells, margin)));\n        } else {\n          cells.forEach(function (row, rdx) {\n            row.forEach(function (cell, cdx) {\n              if (cell) {\n                ctx.fillRect(cdx + margin, rdx + margin, 1, 1);\n              }\n            });\n          });\n        }\n\n        if (this.state.imgLoaded && this._image && calculatedImageSettings != null) {\n          ctx.drawImage(this._image, calculatedImageSettings.x + margin, calculatedImageSettings.y + margin, calculatedImageSettings.w, calculatedImageSettings.h);\n        }\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props2 = this.props,\n          value = _this$props2.value,\n          size = _this$props2.size,\n          level = _this$props2.level,\n          bgColor = _this$props2.bgColor,\n          fgColor = _this$props2.fgColor,\n          style = _this$props2.style,\n          includeMargin = _this$props2.includeMargin,\n          imageSettings = _this$props2.imageSettings,\n          otherProps = _objectWithoutProperties(_this$props2, [\"value\", \"size\", \"level\", \"bgColor\", \"fgColor\", \"style\", \"includeMargin\", \"imageSettings\"]);\n\n      var canvasStyle = _objectSpread({\n        height: size,\n        width: size\n      }, style);\n\n      var img = null;\n      var imgSrc = imageSettings && imageSettings.src;\n\n      if (imageSettings != null && imgSrc != null) {\n        img = React.createElement(\"img\", {\n          src: imgSrc,\n          style: {\n            display: 'none'\n          },\n          onLoad: this.handleImageLoad,\n          ref: function ref(_ref) {\n            return _this2._image = _ref;\n          }\n        });\n      }\n\n      return React.createElement(React.Fragment, null, React.createElement(\"canvas\", _extends({\n        style: canvasStyle,\n        height: size,\n        width: size,\n        ref: function ref(_ref2) {\n          return _this2._canvas = _ref2;\n        }\n      }, otherProps)), img);\n    }\n  }]);\n\n  return QRCodeCanvas;\n}(React.PureComponent);\n\n_defineProperty(QRCodeCanvas, \"defaultProps\", DEFAULT_PROPS);\n\nif (process.env.NODE_ENV !== 'production') {\n  QRCodeCanvas.propTypes = PROP_TYPES;\n}\n\nvar QRCodeSVG =\n/*#__PURE__*/\nfunction (_React$PureComponent2) {\n  _inherits(QRCodeSVG, _React$PureComponent2);\n\n  function QRCodeSVG() {\n    _classCallCheck(this, QRCodeSVG);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(QRCodeSVG).apply(this, arguments));\n  }\n\n  _createClass(QRCodeSVG, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props3 = this.props,\n          value = _this$props3.value,\n          size = _this$props3.size,\n          level = _this$props3.level,\n          bgColor = _this$props3.bgColor,\n          fgColor = _this$props3.fgColor,\n          includeMargin = _this$props3.includeMargin,\n          imageSettings = _this$props3.imageSettings,\n          otherProps = _objectWithoutProperties(_this$props3, [\"value\", \"size\", \"level\", \"bgColor\", \"fgColor\", \"includeMargin\", \"imageSettings\"]); // We'll use type===-1 to force QRCode to automatically pick the best type\n\n\n      var qrcode = new QRCodeImpl(-1, ErrorCorrectLevel[level]);\n      qrcode.addData(convertStr(value));\n      qrcode.make();\n      var cells = qrcode.modules;\n\n      if (cells === null) {\n        return null;\n      }\n\n      var margin = includeMargin ? MARGIN_SIZE : 0;\n      var numCells = cells.length + margin * 2;\n      var calculatedImageSettings = getImageSettings(this.props, cells);\n      var image = null;\n\n      if (imageSettings != null && calculatedImageSettings != null) {\n        if (calculatedImageSettings.excavation != null) {\n          cells = excavateModules(cells, calculatedImageSettings.excavation);\n        }\n\n        image = React.createElement(\"image\", {\n          xlinkHref: imageSettings.src,\n          height: calculatedImageSettings.h,\n          width: calculatedImageSettings.w,\n          x: calculatedImageSettings.x + margin,\n          y: calculatedImageSettings.y + margin,\n          preserveAspectRatio: \"none\"\n        });\n      } // Drawing strategy: instead of a rect per module, we're going to create a\n      // single path for the dark modules and layer that on top of a light rect,\n      // for a total of 2 DOM nodes. We pay a bit more in string concat but that's\n      // way faster than DOM ops.\n      // For level 1, 441 nodes -> 2\n      // For level 40, 31329 -> 2\n\n\n      var fgPath = generatePath(cells, margin);\n      return React.createElement(\"svg\", _extends({\n        shapeRendering: \"crispEdges\",\n        height: size,\n        width: size,\n        viewBox: \"0 0 \".concat(numCells, \" \").concat(numCells)\n      }, otherProps), React.createElement(\"path\", {\n        fill: bgColor,\n        d: \"M0,0 h\".concat(numCells, \"v\").concat(numCells, \"H0z\")\n      }), React.createElement(\"path\", {\n        fill: fgColor,\n        d: fgPath\n      }), image);\n    }\n  }]);\n\n  return QRCodeSVG;\n}(React.PureComponent);\n\n_defineProperty(QRCodeSVG, \"defaultProps\", DEFAULT_PROPS);\n\nif (process.env.NODE_ENV !== 'production') {\n  QRCodeSVG.propTypes = PROP_TYPES;\n}\n\nvar QRCode = function QRCode(props) {\n  var renderAs = props.renderAs,\n      otherProps = _objectWithoutProperties(props, [\"renderAs\"]);\n\n  var Component = renderAs === 'svg' ? QRCodeSVG : QRCodeCanvas;\n  return React.createElement(Component, otherProps);\n};\n\nQRCode.defaultProps = _objectSpread({\n  renderAs: 'canvas'\n}, DEFAULT_PROPS);\nmodule.exports = QRCode;","var BitByte = require('./8BitByte');\nvar RSBlock = require('./RSBlock');\nvar BitBuffer = require('./BitBuffer');\nvar util = require('./util');\nvar Polynomial = require('./Polynomial');\n\nfunction QRCode(typeNumber, errorCorrectLevel) {\n\tthis.typeNumber = typeNumber;\n\tthis.errorCorrectLevel = errorCorrectLevel;\n\tthis.modules = null;\n\tthis.moduleCount = 0;\n\tthis.dataCache = null;\n\tthis.dataList = [];\n}\n\n// for client side minification\nvar proto = QRCode.prototype;\n\nproto.addData = function(data) {\n\tvar newData = new BitByte(data);\n\tthis.dataList.push(newData);\n\tthis.dataCache = null;\n};\n\nproto.isDark = function(row, col) {\n\tif (row < 0 || this.moduleCount <= row || col < 0 || this.moduleCount <= col) {\n\t\tthrow new Error(row + \",\" + col);\n\t}\n\treturn this.modules[row][col];\n};\n\nproto.getModuleCount = function() {\n\treturn this.moduleCount;\n};\n\nproto.make = function() {\n\t// Calculate automatically typeNumber if provided is < 1\n\tif (this.typeNumber < 1 ){\n\t\tvar typeNumber = 1;\n\t\tfor (typeNumber = 1; typeNumber < 40; typeNumber++) {\n\t\t\tvar rsBlocks = RSBlock.getRSBlocks(typeNumber, this.errorCorrectLevel);\n\n\t\t\tvar buffer = new BitBuffer();\n\t\t\tvar totalDataCount = 0;\n\t\t\tfor (var i = 0; i < rsBlocks.length; i++) {\n\t\t\t\ttotalDataCount += rsBlocks[i].dataCount;\n\t\t\t}\n\n\t\t\tfor (var i = 0; i < this.dataList.length; i++) {\n\t\t\t\tvar data = this.dataList[i];\n\t\t\t\tbuffer.put(data.mode, 4);\n\t\t\t\tbuffer.put(data.getLength(), util.getLengthInBits(data.mode, typeNumber) );\n\t\t\t\tdata.write(buffer);\n\t\t\t}\n\t\t\tif (buffer.getLengthInBits() <= totalDataCount * 8)\n\t\t\t\tbreak;\n\t\t}\n\t\tthis.typeNumber = typeNumber;\n\t}\n\tthis.makeImpl(false, this.getBestMaskPattern() );\n};\n\nproto.makeImpl = function(test, maskPattern) {\n\t\n\tthis.moduleCount = this.typeNumber * 4 + 17;\n\tthis.modules = new Array(this.moduleCount);\n\t\n\tfor (var row = 0; row < this.moduleCount; row++) {\n\t\t\n\t\tthis.modules[row] = new Array(this.moduleCount);\n\t\t\n\t\tfor (var col = 0; col < this.moduleCount; col++) {\n\t\t\tthis.modules[row][col] = null;//(col + row) % 3;\n\t\t}\n\t}\n\n\tthis.setupPositionProbePattern(0, 0);\n\tthis.setupPositionProbePattern(this.moduleCount - 7, 0);\n\tthis.setupPositionProbePattern(0, this.moduleCount - 7);\n\tthis.setupPositionAdjustPattern();\n\tthis.setupTimingPattern();\n\tthis.setupTypeInfo(test, maskPattern);\n\t\n\tif (this.typeNumber >= 7) {\n\t\tthis.setupTypeNumber(test);\n\t}\n\n\tif (this.dataCache == null) {\n\t\tthis.dataCache = QRCode.createData(this.typeNumber, this.errorCorrectLevel, this.dataList);\n\t}\n\n\tthis.mapData(this.dataCache, maskPattern);\n};\n\nproto.setupPositionProbePattern = function(row, col)  {\n\t\n\tfor (var r = -1; r <= 7; r++) {\n\t\t\n\t\tif (row + r <= -1 || this.moduleCount <= row + r) continue;\n\t\t\n\t\tfor (var c = -1; c <= 7; c++) {\n\t\t\t\n\t\t\tif (col + c <= -1 || this.moduleCount <= col + c) continue;\n\t\t\t\n\t\t\tif ( (0 <= r && r <= 6 && (c == 0 || c == 6) )\n\t\t\t\t\t|| (0 <= c && c <= 6 && (r == 0 || r == 6) )\n\t\t\t\t\t|| (2 <= r && r <= 4 && 2 <= c && c <= 4) ) {\n\t\t\t\tthis.modules[row + r][col + c] = true;\n\t\t\t} else {\n\t\t\t\tthis.modules[row + r][col + c] = false;\n\t\t\t}\n\t\t}\t\t\n\t}\t\t\n};\n\nproto.getBestMaskPattern = function() {\n\n\tvar minLostPoint = 0;\n\tvar pattern = 0;\n\n\tfor (var i = 0; i < 8; i++) {\n\t\t\n\t\tthis.makeImpl(true, i);\n\n\t\tvar lostPoint = util.getLostPoint(this);\n\n\t\tif (i == 0 || minLostPoint >  lostPoint) {\n\t\t\tminLostPoint = lostPoint;\n\t\t\tpattern = i;\n\t\t}\n\t}\n\n\treturn pattern;\n};\n\nproto.createMovieClip = function(target_mc, instance_name, depth) {\n\n\tvar qr_mc = target_mc.createEmptyMovieClip(instance_name, depth);\n\tvar cs = 1;\n\n\tthis.make();\n\n\tfor (var row = 0; row < this.modules.length; row++) {\n\t\t\n\t\tvar y = row * cs;\n\t\t\n\t\tfor (var col = 0; col < this.modules[row].length; col++) {\n\n\t\t\tvar x = col * cs;\n\t\t\tvar dark = this.modules[row][col];\n\t\t\n\t\t\tif (dark) {\n\t\t\t\tqr_mc.beginFill(0, 100);\n\t\t\t\tqr_mc.moveTo(x, y);\n\t\t\t\tqr_mc.lineTo(x + cs, y);\n\t\t\t\tqr_mc.lineTo(x + cs, y + cs);\n\t\t\t\tqr_mc.lineTo(x, y + cs);\n\t\t\t\tqr_mc.endFill();\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn qr_mc;\n};\n\nproto.setupTimingPattern = function() {\n\t\n\tfor (var r = 8; r < this.moduleCount - 8; r++) {\n\t\tif (this.modules[r][6] != null) {\n\t\t\tcontinue;\n\t\t}\n\t\tthis.modules[r][6] = (r % 2 == 0);\n\t}\n\n\tfor (var c = 8; c < this.moduleCount - 8; c++) {\n\t\tif (this.modules[6][c] != null) {\n\t\t\tcontinue;\n\t\t}\n\t\tthis.modules[6][c] = (c % 2 == 0);\n\t}\n};\n\nproto.setupPositionAdjustPattern = function() {\n\n\tvar pos = util.getPatternPosition(this.typeNumber);\n\t\n\tfor (var i = 0; i < pos.length; i++) {\n\t\n\t\tfor (var j = 0; j < pos.length; j++) {\n\t\t\n\t\t\tvar row = pos[i];\n\t\t\tvar col = pos[j];\n\t\t\t\n\t\t\tif (this.modules[row][col] != null) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\t\n\t\t\tfor (var r = -2; r <= 2; r++) {\n\t\t\t\n\t\t\t\tfor (var c = -2; c <= 2; c++) {\n\t\t\t\t\n\t\t\t\t\tif (r == -2 || r == 2 || c == -2 || c == 2\n\t\t\t\t\t\t\t|| (r == 0 && c == 0) ) {\n\t\t\t\t\t\tthis.modules[row + r][col + c] = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.modules[row + r][col + c] = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n\nproto.setupTypeNumber = function(test) {\n\n\tvar bits = util.getBCHTypeNumber(this.typeNumber);\n\n\tfor (var i = 0; i < 18; i++) {\n\t\tvar mod = (!test && ( (bits >> i) & 1) == 1);\n\t\tthis.modules[Math.floor(i / 3)][i % 3 + this.moduleCount - 8 - 3] = mod;\n\t}\n\n\tfor (var i = 0; i < 18; i++) {\n\t\tvar mod = (!test && ( (bits >> i) & 1) == 1);\n\t\tthis.modules[i % 3 + this.moduleCount - 8 - 3][Math.floor(i / 3)] = mod;\n\t}\n};\n\nproto.setupTypeInfo = function(test, maskPattern) {\n\n\tvar data = (this.errorCorrectLevel << 3) | maskPattern;\n\tvar bits = util.getBCHTypeInfo(data);\n\n\t// vertical\t\t\n\tfor (var i = 0; i < 15; i++) {\n\n\t\tvar mod = (!test && ( (bits >> i) & 1) == 1);\n\n\t\tif (i < 6) {\n\t\t\tthis.modules[i][8] = mod;\n\t\t} else if (i < 8) {\n\t\t\tthis.modules[i + 1][8] = mod;\n\t\t} else {\n\t\t\tthis.modules[this.moduleCount - 15 + i][8] = mod;\n\t\t}\n\t}\n\n\t// horizontal\n\tfor (var i = 0; i < 15; i++) {\n\n\t\tvar mod = (!test && ( (bits >> i) & 1) == 1);\n\t\t\n\t\tif (i < 8) {\n\t\t\tthis.modules[8][this.moduleCount - i - 1] = mod;\n\t\t} else if (i < 9) {\n\t\t\tthis.modules[8][15 - i - 1 + 1] = mod;\n\t\t} else {\n\t\t\tthis.modules[8][15 - i - 1] = mod;\n\t\t}\n\t}\n\n\t// fixed module\n\tthis.modules[this.moduleCount - 8][8] = (!test);\n};\n\nproto.mapData = function(data, maskPattern) {\n\t\n\tvar inc = -1;\n\tvar row = this.moduleCount - 1;\n\tvar bitIndex = 7;\n\tvar byteIndex = 0;\n\t\n\tfor (var col = this.moduleCount - 1; col > 0; col -= 2) {\n\n\t\tif (col == 6) col--;\n\n\t\twhile (true) {\n\n\t\t\tfor (var c = 0; c < 2; c++) {\n\t\t\t\t\n\t\t\t\tif (this.modules[row][col - c] == null) {\n\t\t\t\t\t\n\t\t\t\t\tvar dark = false;\n\n\t\t\t\t\tif (byteIndex < data.length) {\n\t\t\t\t\t\tdark = ( ( (data[byteIndex] >>> bitIndex) & 1) == 1);\n\t\t\t\t\t}\n\n\t\t\t\t\tvar mask = util.getMask(maskPattern, row, col - c);\n\n\t\t\t\t\tif (mask) {\n\t\t\t\t\t\tdark = !dark;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthis.modules[row][col - c] = dark;\n\t\t\t\t\tbitIndex--;\n\n\t\t\t\t\tif (bitIndex == -1) {\n\t\t\t\t\t\tbyteIndex++;\n\t\t\t\t\t\tbitIndex = 7;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\trow += inc;\n\n\t\t\tif (row < 0 || this.moduleCount <= row) {\n\t\t\t\trow -= inc;\n\t\t\t\tinc = -inc;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n};\n\nQRCode.PAD0 = 0xEC;\nQRCode.PAD1 = 0x11;\n\nQRCode.createData = function(typeNumber, errorCorrectLevel, dataList) {\n\t\n\tvar rsBlocks = RSBlock.getRSBlocks(typeNumber, errorCorrectLevel);\n\t\n\tvar buffer = new BitBuffer();\n\t\n\tfor (var i = 0; i < dataList.length; i++) {\n\t\tvar data = dataList[i];\n\t\tbuffer.put(data.mode, 4);\n\t\tbuffer.put(data.getLength(), util.getLengthInBits(data.mode, typeNumber) );\n\t\tdata.write(buffer);\n\t}\n\n\t// calc num max data.\n\tvar totalDataCount = 0;\n\tfor (var i = 0; i < rsBlocks.length; i++) {\n\t\ttotalDataCount += rsBlocks[i].dataCount;\n\t}\n\n\tif (buffer.getLengthInBits() > totalDataCount * 8) {\n\t\tthrow new Error(\"code length overflow. (\"\n\t\t\t+ buffer.getLengthInBits()\n\t\t\t+ \">\"\n\t\t\t+  totalDataCount * 8\n\t\t\t+ \")\");\n\t}\n\n\t// end code\n\tif (buffer.getLengthInBits() + 4 <= totalDataCount * 8) {\n\t\tbuffer.put(0, 4);\n\t}\n\n\t// padding\n\twhile (buffer.getLengthInBits() % 8 != 0) {\n\t\tbuffer.putBit(false);\n\t}\n\n\t// padding\n\twhile (true) {\n\t\t\n\t\tif (buffer.getLengthInBits() >= totalDataCount * 8) {\n\t\t\tbreak;\n\t\t}\n\t\tbuffer.put(QRCode.PAD0, 8);\n\t\t\n\t\tif (buffer.getLengthInBits() >= totalDataCount * 8) {\n\t\t\tbreak;\n\t\t}\n\t\tbuffer.put(QRCode.PAD1, 8);\n\t}\n\n\treturn QRCode.createBytes(buffer, rsBlocks);\n};\n\nQRCode.createBytes = function(buffer, rsBlocks) {\n\n\tvar offset = 0;\n\t\n\tvar maxDcCount = 0;\n\tvar maxEcCount = 0;\n\t\n\tvar dcdata = new Array(rsBlocks.length);\n\tvar ecdata = new Array(rsBlocks.length);\n\t\n\tfor (var r = 0; r < rsBlocks.length; r++) {\n\n\t\tvar dcCount = rsBlocks[r].dataCount;\n\t\tvar ecCount = rsBlocks[r].totalCount - dcCount;\n\n\t\tmaxDcCount = Math.max(maxDcCount, dcCount);\n\t\tmaxEcCount = Math.max(maxEcCount, ecCount);\n\t\t\n\t\tdcdata[r] = new Array(dcCount);\n\t\t\n\t\tfor (var i = 0; i < dcdata[r].length; i++) {\n\t\t\tdcdata[r][i] = 0xff & buffer.buffer[i + offset];\n\t\t}\n\t\toffset += dcCount;\n\t\t\n\t\tvar rsPoly = util.getErrorCorrectPolynomial(ecCount);\n\t\tvar rawPoly = new Polynomial(dcdata[r], rsPoly.getLength() - 1);\n\n\t\tvar modPoly = rawPoly.mod(rsPoly);\n\t\tecdata[r] = new Array(rsPoly.getLength() - 1);\n\t\tfor (var i = 0; i < ecdata[r].length; i++) {\n            var modIndex = i + modPoly.getLength() - ecdata[r].length;\n\t\t\tecdata[r][i] = (modIndex >= 0)? modPoly.get(modIndex) : 0;\n\t\t}\n\n\t}\n\t\n\tvar totalCodeCount = 0;\n\tfor (var i = 0; i < rsBlocks.length; i++) {\n\t\ttotalCodeCount += rsBlocks[i].totalCount;\n\t}\n\n\tvar data = new Array(totalCodeCount);\n\tvar index = 0;\n\n\tfor (var i = 0; i < maxDcCount; i++) {\n\t\tfor (var r = 0; r < rsBlocks.length; r++) {\n\t\t\tif (i < dcdata[r].length) {\n\t\t\t\tdata[index++] = dcdata[r][i];\n\t\t\t}\n\t\t}\n\t}\n\n\tfor (var i = 0; i < maxEcCount; i++) {\n\t\tfor (var r = 0; r < rsBlocks.length; r++) {\n\t\t\tif (i < ecdata[r].length) {\n\t\t\t\tdata[index++] = ecdata[r][i];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn data;\n};\n\nmodule.exports = QRCode;\n\n","var mode = require('./mode');\n\nfunction QR8bitByte(data) {\n\tthis.mode = mode.MODE_8BIT_BYTE;\n\tthis.data = data;\n}\n\nQR8bitByte.prototype = {\n\n\tgetLength : function(buffer) {\n\t\treturn this.data.length;\n\t},\n\t\n\twrite : function(buffer) {\n\t\tfor (var i = 0; i < this.data.length; i++) {\n\t\t\t// not JIS ...\n\t\t\tbuffer.put(this.data.charCodeAt(i), 8);\n\t\t}\n\t}\n};\n\nmodule.exports = QR8bitByte;\n\n","// ErrorCorrectLevel\nvar ECL = require('./ErrorCorrectLevel');\n\nfunction QRRSBlock(totalCount, dataCount) {\n\tthis.totalCount = totalCount;\n\tthis.dataCount  = dataCount;\n}\n\nQRRSBlock.RS_BLOCK_TABLE = [\n\n\t// L\n\t// M\n\t// Q\n\t// H\n\n\t// 1\n\t[1, 26, 19],\n\t[1, 26, 16],\n\t[1, 26, 13],\n\t[1, 26, 9],\n\t\n\t// 2\n\t[1, 44, 34],\n\t[1, 44, 28],\n\t[1, 44, 22],\n\t[1, 44, 16],\n\n\t// 3\n\t[1, 70, 55],\n\t[1, 70, 44],\n\t[2, 35, 17],\n\t[2, 35, 13],\n\n\t// 4\t\t\n\t[1, 100, 80],\n\t[2, 50, 32],\n\t[2, 50, 24],\n\t[4, 25, 9],\n\t\n\t// 5\n\t[1, 134, 108],\n\t[2, 67, 43],\n\t[2, 33, 15, 2, 34, 16],\n\t[2, 33, 11, 2, 34, 12],\n\t\n\t// 6\n\t[2, 86, 68],\n\t[4, 43, 27],\n\t[4, 43, 19],\n\t[4, 43, 15],\n\t\n\t// 7\t\t\n\t[2, 98, 78],\n\t[4, 49, 31],\n\t[2, 32, 14, 4, 33, 15],\n\t[4, 39, 13, 1, 40, 14],\n\t\n\t// 8\n\t[2, 121, 97],\n\t[2, 60, 38, 2, 61, 39],\n\t[4, 40, 18, 2, 41, 19],\n\t[4, 40, 14, 2, 41, 15],\n\t\n\t// 9\n\t[2, 146, 116],\n\t[3, 58, 36, 2, 59, 37],\n\t[4, 36, 16, 4, 37, 17],\n\t[4, 36, 12, 4, 37, 13],\n\t\n\t// 10\t\t\n\t[2, 86, 68, 2, 87, 69],\n\t[4, 69, 43, 1, 70, 44],\n\t[6, 43, 19, 2, 44, 20],\n\t[6, 43, 15, 2, 44, 16],\n\n\t// 11\n\t[4, 101, 81],\n\t[1, 80, 50, 4, 81, 51],\n\t[4, 50, 22, 4, 51, 23],\n\t[3, 36, 12, 8, 37, 13],\n\n\t// 12\n\t[2, 116, 92, 2, 117, 93],\n\t[6, 58, 36, 2, 59, 37],\n\t[4, 46, 20, 6, 47, 21],\n\t[7, 42, 14, 4, 43, 15],\n\n\t// 13\n\t[4, 133, 107],\n\t[8, 59, 37, 1, 60, 38],\n\t[8, 44, 20, 4, 45, 21],\n\t[12, 33, 11, 4, 34, 12],\n\n\t// 14\n\t[3, 145, 115, 1, 146, 116],\n\t[4, 64, 40, 5, 65, 41],\n\t[11, 36, 16, 5, 37, 17],\n\t[11, 36, 12, 5, 37, 13],\n\n\t// 15\n\t[5, 109, 87, 1, 110, 88],\n\t[5, 65, 41, 5, 66, 42],\n\t[5, 54, 24, 7, 55, 25],\n\t[11, 36, 12],\n\n\t// 16\n\t[5, 122, 98, 1, 123, 99],\n\t[7, 73, 45, 3, 74, 46],\n\t[15, 43, 19, 2, 44, 20],\n\t[3, 45, 15, 13, 46, 16],\n\n\t// 17\n\t[1, 135, 107, 5, 136, 108],\n\t[10, 74, 46, 1, 75, 47],\n\t[1, 50, 22, 15, 51, 23],\n\t[2, 42, 14, 17, 43, 15],\n\n\t// 18\n\t[5, 150, 120, 1, 151, 121],\n\t[9, 69, 43, 4, 70, 44],\n\t[17, 50, 22, 1, 51, 23],\n\t[2, 42, 14, 19, 43, 15],\n\n\t// 19\n\t[3, 141, 113, 4, 142, 114],\n\t[3, 70, 44, 11, 71, 45],\n\t[17, 47, 21, 4, 48, 22],\n\t[9, 39, 13, 16, 40, 14],\n\n\t// 20\n\t[3, 135, 107, 5, 136, 108],\n\t[3, 67, 41, 13, 68, 42],\n\t[15, 54, 24, 5, 55, 25],\n\t[15, 43, 15, 10, 44, 16],\n\n\t// 21\n\t[4, 144, 116, 4, 145, 117],\n\t[17, 68, 42],\n\t[17, 50, 22, 6, 51, 23],\n\t[19, 46, 16, 6, 47, 17],\n\n\t// 22\n\t[2, 139, 111, 7, 140, 112],\n\t[17, 74, 46],\n\t[7, 54, 24, 16, 55, 25],\n\t[34, 37, 13],\n\n\t// 23\n\t[4, 151, 121, 5, 152, 122],\n\t[4, 75, 47, 14, 76, 48],\n\t[11, 54, 24, 14, 55, 25],\n\t[16, 45, 15, 14, 46, 16],\n\n\t// 24\n\t[6, 147, 117, 4, 148, 118],\n\t[6, 73, 45, 14, 74, 46],\n\t[11, 54, 24, 16, 55, 25],\n\t[30, 46, 16, 2, 47, 17],\n\n\t// 25\n\t[8, 132, 106, 4, 133, 107],\n\t[8, 75, 47, 13, 76, 48],\n\t[7, 54, 24, 22, 55, 25],\n\t[22, 45, 15, 13, 46, 16],\n\n\t// 26\n\t[10, 142, 114, 2, 143, 115],\n\t[19, 74, 46, 4, 75, 47],\n\t[28, 50, 22, 6, 51, 23],\n\t[33, 46, 16, 4, 47, 17],\n\n\t// 27\n\t[8, 152, 122, 4, 153, 123],\n\t[22, 73, 45, 3, 74, 46],\n\t[8, 53, 23, 26, 54, 24],\n\t[12, 45, 15, 28, 46, 16],\n\n\t// 28\n\t[3, 147, 117, 10, 148, 118],\n\t[3, 73, 45, 23, 74, 46],\n\t[4, 54, 24, 31, 55, 25],\n\t[11, 45, 15, 31, 46, 16],\n\n\t// 29\n\t[7, 146, 116, 7, 147, 117],\n\t[21, 73, 45, 7, 74, 46],\n\t[1, 53, 23, 37, 54, 24],\n\t[19, 45, 15, 26, 46, 16],\n\n\t// 30\n\t[5, 145, 115, 10, 146, 116],\n\t[19, 75, 47, 10, 76, 48],\n\t[15, 54, 24, 25, 55, 25],\n\t[23, 45, 15, 25, 46, 16],\n\n\t// 31\n\t[13, 145, 115, 3, 146, 116],\n\t[2, 74, 46, 29, 75, 47],\n\t[42, 54, 24, 1, 55, 25],\n\t[23, 45, 15, 28, 46, 16],\n\n\t// 32\n\t[17, 145, 115],\n\t[10, 74, 46, 23, 75, 47],\n\t[10, 54, 24, 35, 55, 25],\n\t[19, 45, 15, 35, 46, 16],\n\n\t// 33\n\t[17, 145, 115, 1, 146, 116],\n\t[14, 74, 46, 21, 75, 47],\n\t[29, 54, 24, 19, 55, 25],\n\t[11, 45, 15, 46, 46, 16],\n\n\t// 34\n\t[13, 145, 115, 6, 146, 116],\n\t[14, 74, 46, 23, 75, 47],\n\t[44, 54, 24, 7, 55, 25],\n\t[59, 46, 16, 1, 47, 17],\n\n\t// 35\n\t[12, 151, 121, 7, 152, 122],\n\t[12, 75, 47, 26, 76, 48],\n\t[39, 54, 24, 14, 55, 25],\n\t[22, 45, 15, 41, 46, 16],\n\n\t// 36\n\t[6, 151, 121, 14, 152, 122],\n\t[6, 75, 47, 34, 76, 48],\n\t[46, 54, 24, 10, 55, 25],\n\t[2, 45, 15, 64, 46, 16],\n\n\t// 37\n\t[17, 152, 122, 4, 153, 123],\n\t[29, 74, 46, 14, 75, 47],\n\t[49, 54, 24, 10, 55, 25],\n\t[24, 45, 15, 46, 46, 16],\n\n\t// 38\n\t[4, 152, 122, 18, 153, 123],\n\t[13, 74, 46, 32, 75, 47],\n\t[48, 54, 24, 14, 55, 25],\n\t[42, 45, 15, 32, 46, 16],\n\n\t// 39\n\t[20, 147, 117, 4, 148, 118],\n\t[40, 75, 47, 7, 76, 48],\n\t[43, 54, 24, 22, 55, 25],\n\t[10, 45, 15, 67, 46, 16],\n\n\t// 40\n\t[19, 148, 118, 6, 149, 119],\n\t[18, 75, 47, 31, 76, 48],\n\t[34, 54, 24, 34, 55, 25],\n\t[20, 45, 15, 61, 46, 16]\n];\n\nQRRSBlock.getRSBlocks = function(typeNumber, errorCorrectLevel) {\n\t\n\tvar rsBlock = QRRSBlock.getRsBlockTable(typeNumber, errorCorrectLevel);\n\t\n\tif (rsBlock == undefined) {\n\t\tthrow new Error(\"bad rs block @ typeNumber:\" + typeNumber + \"/errorCorrectLevel:\" + errorCorrectLevel);\n\t}\n\n\tvar length = rsBlock.length / 3;\n\t\n\tvar list = new Array();\n\t\n\tfor (var i = 0; i < length; i++) {\n\n\t\tvar count = rsBlock[i * 3 + 0];\n\t\tvar totalCount = rsBlock[i * 3 + 1];\n\t\tvar dataCount  = rsBlock[i * 3 + 2];\n\n\t\tfor (var j = 0; j < count; j++) {\n\t\t\tlist.push(new QRRSBlock(totalCount, dataCount) );\t\n\t\t}\n\t}\n\t\n\treturn list;\n}\n\nQRRSBlock.getRsBlockTable = function(typeNumber, errorCorrectLevel) {\n\n\tswitch(errorCorrectLevel) {\n\tcase ECL.L :\n\t\treturn QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 0];\n\tcase ECL.M :\n\t\treturn QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 1];\n\tcase ECL.Q :\n\t\treturn QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 2];\n\tcase ECL.H :\n\t\treturn QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 3];\n\tdefault :\n\t\treturn undefined;\n\t}\n}\n\nmodule.exports = QRRSBlock;\n","function QRBitBuffer() {\n\tthis.buffer = new Array();\n\tthis.length = 0;\n}\n\nQRBitBuffer.prototype = {\n\n\tget : function(index) {\n\t\tvar bufIndex = Math.floor(index / 8);\n\t\treturn ( (this.buffer[bufIndex] >>> (7 - index % 8) ) & 1) == 1;\n\t},\n\t\n\tput : function(num, length) {\n\t\tfor (var i = 0; i < length; i++) {\n\t\t\tthis.putBit( ( (num >>> (length - i - 1) ) & 1) == 1);\n\t\t}\n\t},\n\t\n\tgetLengthInBits : function() {\n\t\treturn this.length;\n\t},\n\t\n\tputBit : function(bit) {\n\t\n\t\tvar bufIndex = Math.floor(this.length / 8);\n\t\tif (this.buffer.length <= bufIndex) {\n\t\t\tthis.buffer.push(0);\n\t\t}\n\t\n\t\tif (bit) {\n\t\t\tthis.buffer[bufIndex] |= (0x80 >>> (this.length % 8) );\n\t\t}\n\t\n\t\tthis.length++;\n\t}\n};\n\nmodule.exports = QRBitBuffer;\n","var Mode = require('./mode');\nvar Polynomial = require('./Polynomial');\nvar math = require('./math');\n\nvar QRMaskPattern = {\n\tPATTERN000 : 0,\n\tPATTERN001 : 1,\n\tPATTERN010 : 2,\n\tPATTERN011 : 3,\n\tPATTERN100 : 4,\n\tPATTERN101 : 5,\n\tPATTERN110 : 6,\n\tPATTERN111 : 7\n};\n\nvar QRUtil = {\n\n    PATTERN_POSITION_TABLE : [\n\t    [],\n\t    [6, 18],\n\t    [6, 22],\n\t    [6, 26],\n\t    [6, 30],\n\t    [6, 34],\n\t    [6, 22, 38],\n\t    [6, 24, 42],\n\t    [6, 26, 46],\n\t    [6, 28, 50],\n\t    [6, 30, 54],\t\t\n\t    [6, 32, 58],\n\t    [6, 34, 62],\n\t    [6, 26, 46, 66],\n\t    [6, 26, 48, 70],\n\t    [6, 26, 50, 74],\n\t    [6, 30, 54, 78],\n\t    [6, 30, 56, 82],\n\t    [6, 30, 58, 86],\n\t    [6, 34, 62, 90],\n\t    [6, 28, 50, 72, 94],\n\t    [6, 26, 50, 74, 98],\n\t    [6, 30, 54, 78, 102],\n\t    [6, 28, 54, 80, 106],\n\t    [6, 32, 58, 84, 110],\n\t    [6, 30, 58, 86, 114],\n\t    [6, 34, 62, 90, 118],\n\t    [6, 26, 50, 74, 98, 122],\n\t    [6, 30, 54, 78, 102, 126],\n\t    [6, 26, 52, 78, 104, 130],\n\t    [6, 30, 56, 82, 108, 134],\n\t    [6, 34, 60, 86, 112, 138],\n\t    [6, 30, 58, 86, 114, 142],\n\t    [6, 34, 62, 90, 118, 146],\n\t    [6, 30, 54, 78, 102, 126, 150],\n\t    [6, 24, 50, 76, 102, 128, 154],\n\t    [6, 28, 54, 80, 106, 132, 158],\n\t    [6, 32, 58, 84, 110, 136, 162],\n\t    [6, 26, 54, 82, 110, 138, 166],\n\t    [6, 30, 58, 86, 114, 142, 170]\n    ],\n\n    G15 : (1 << 10) | (1 << 8) | (1 << 5) | (1 << 4) | (1 << 2) | (1 << 1) | (1 << 0),\n    G18 : (1 << 12) | (1 << 11) | (1 << 10) | (1 << 9) | (1 << 8) | (1 << 5) | (1 << 2) | (1 << 0),\n    G15_MASK : (1 << 14) | (1 << 12) | (1 << 10)\t| (1 << 4) | (1 << 1),\n\n    getBCHTypeInfo : function(data) {\n\t    var d = data << 10;\n\t    while (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G15) >= 0) {\n\t\t    d ^= (QRUtil.G15 << (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G15) ) ); \t\n\t    }\n\t    return ( (data << 10) | d) ^ QRUtil.G15_MASK;\n    },\n\n    getBCHTypeNumber : function(data) {\n\t    var d = data << 12;\n\t    while (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G18) >= 0) {\n\t\t    d ^= (QRUtil.G18 << (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G18) ) ); \t\n\t    }\n\t    return (data << 12) | d;\n    },\n\n    getBCHDigit : function(data) {\n\n\t    var digit = 0;\n\n\t    while (data != 0) {\n\t\t    digit++;\n\t\t    data >>>= 1;\n\t    }\n\n\t    return digit;\n    },\n\n    getPatternPosition : function(typeNumber) {\n\t    return QRUtil.PATTERN_POSITION_TABLE[typeNumber - 1];\n    },\n\n    getMask : function(maskPattern, i, j) {\n\t    \n\t    switch (maskPattern) {\n\t\t    \n\t    case QRMaskPattern.PATTERN000 : return (i + j) % 2 == 0;\n\t    case QRMaskPattern.PATTERN001 : return i % 2 == 0;\n\t    case QRMaskPattern.PATTERN010 : return j % 3 == 0;\n\t    case QRMaskPattern.PATTERN011 : return (i + j) % 3 == 0;\n\t    case QRMaskPattern.PATTERN100 : return (Math.floor(i / 2) + Math.floor(j / 3) ) % 2 == 0;\n\t    case QRMaskPattern.PATTERN101 : return (i * j) % 2 + (i * j) % 3 == 0;\n\t    case QRMaskPattern.PATTERN110 : return ( (i * j) % 2 + (i * j) % 3) % 2 == 0;\n\t    case QRMaskPattern.PATTERN111 : return ( (i * j) % 3 + (i + j) % 2) % 2 == 0;\n\n\t    default :\n\t\t    throw new Error(\"bad maskPattern:\" + maskPattern);\n\t    }\n    },\n\n    getErrorCorrectPolynomial : function(errorCorrectLength) {\n\n\t    var a = new Polynomial([1], 0);\n\n\t    for (var i = 0; i < errorCorrectLength; i++) {\n\t\t    a = a.multiply(new Polynomial([1, math.gexp(i)], 0) );\n\t    }\n\n\t    return a;\n    },\n\n    getLengthInBits : function(mode, type) {\n\n\t    if (1 <= type && type < 10) {\n\n\t\t    // 1 - 9\n\n\t\t    switch(mode) {\n\t\t    case Mode.MODE_NUMBER \t: return 10;\n\t\t    case Mode.MODE_ALPHA_NUM \t: return 9;\n\t\t    case Mode.MODE_8BIT_BYTE\t: return 8;\n\t\t    case Mode.MODE_KANJI  \t: return 8;\n\t\t    default :\n\t\t\t    throw new Error(\"mode:\" + mode);\n\t\t    }\n\n\t    } else if (type < 27) {\n\n\t\t    // 10 - 26\n\n\t\t    switch(mode) {\n\t\t    case Mode.MODE_NUMBER \t: return 12;\n\t\t    case Mode.MODE_ALPHA_NUM \t: return 11;\n\t\t    case Mode.MODE_8BIT_BYTE\t: return 16;\n\t\t    case Mode.MODE_KANJI  \t: return 10;\n\t\t    default :\n\t\t\t    throw new Error(\"mode:\" + mode);\n\t\t    }\n\n\t    } else if (type < 41) {\n\n\t\t    // 27 - 40\n\n\t\t    switch(mode) {\n\t\t    case Mode.MODE_NUMBER \t: return 14;\n\t\t    case Mode.MODE_ALPHA_NUM\t: return 13;\n\t\t    case Mode.MODE_8BIT_BYTE\t: return 16;\n\t\t    case Mode.MODE_KANJI  \t: return 12;\n\t\t    default :\n\t\t\t    throw new Error(\"mode:\" + mode);\n\t\t    }\n\n\t    } else {\n\t\t    throw new Error(\"type:\" + type);\n\t    }\n    },\n\n    getLostPoint : function(qrCode) {\n\t    \n\t    var moduleCount = qrCode.getModuleCount();\n\t    \n\t    var lostPoint = 0;\n\t    \n\t    // LEVEL1\n\t    \n\t    for (var row = 0; row < moduleCount; row++) {\n\n\t\t    for (var col = 0; col < moduleCount; col++) {\n\n\t\t\t    var sameCount = 0;\n\t\t\t    var dark = qrCode.isDark(row, col);\n\n\t\t\t\tfor (var r = -1; r <= 1; r++) {\n\n\t\t\t\t    if (row + r < 0 || moduleCount <= row + r) {\n\t\t\t\t\t    continue;\n\t\t\t\t    }\n\n\t\t\t\t    for (var c = -1; c <= 1; c++) {\n\n\t\t\t\t\t    if (col + c < 0 || moduleCount <= col + c) {\n\t\t\t\t\t\t    continue;\n\t\t\t\t\t    }\n\n\t\t\t\t\t    if (r == 0 && c == 0) {\n\t\t\t\t\t\t    continue;\n\t\t\t\t\t    }\n\n\t\t\t\t\t    if (dark == qrCode.isDark(row + r, col + c) ) {\n\t\t\t\t\t\t    sameCount++;\n\t\t\t\t\t    }\n\t\t\t\t    }\n\t\t\t    }\n\n\t\t\t    if (sameCount > 5) {\n\t\t\t\t    lostPoint += (3 + sameCount - 5);\n\t\t\t    }\n\t\t    }\n\t    }\n\n\t    // LEVEL2\n\n\t    for (var row = 0; row < moduleCount - 1; row++) {\n\t\t    for (var col = 0; col < moduleCount - 1; col++) {\n\t\t\t    var count = 0;\n\t\t\t    if (qrCode.isDark(row,     col    ) ) count++;\n\t\t\t    if (qrCode.isDark(row + 1, col    ) ) count++;\n\t\t\t    if (qrCode.isDark(row,     col + 1) ) count++;\n\t\t\t    if (qrCode.isDark(row + 1, col + 1) ) count++;\n\t\t\t    if (count == 0 || count == 4) {\n\t\t\t\t    lostPoint += 3;\n\t\t\t    }\n\t\t    }\n\t    }\n\n\t    // LEVEL3\n\n\t    for (var row = 0; row < moduleCount; row++) {\n\t\t    for (var col = 0; col < moduleCount - 6; col++) {\n\t\t\t    if (qrCode.isDark(row, col)\n\t\t\t\t\t    && !qrCode.isDark(row, col + 1)\n\t\t\t\t\t    &&  qrCode.isDark(row, col + 2)\n\t\t\t\t\t    &&  qrCode.isDark(row, col + 3)\n\t\t\t\t\t    &&  qrCode.isDark(row, col + 4)\n\t\t\t\t\t    && !qrCode.isDark(row, col + 5)\n\t\t\t\t\t    &&  qrCode.isDark(row, col + 6) ) {\n\t\t\t\t    lostPoint += 40;\n\t\t\t    }\n\t\t    }\n\t    }\n\n\t    for (var col = 0; col < moduleCount; col++) {\n\t\t    for (var row = 0; row < moduleCount - 6; row++) {\n\t\t\t    if (qrCode.isDark(row, col)\n\t\t\t\t\t    && !qrCode.isDark(row + 1, col)\n\t\t\t\t\t    &&  qrCode.isDark(row + 2, col)\n\t\t\t\t\t    &&  qrCode.isDark(row + 3, col)\n\t\t\t\t\t    &&  qrCode.isDark(row + 4, col)\n\t\t\t\t\t    && !qrCode.isDark(row + 5, col)\n\t\t\t\t\t    &&  qrCode.isDark(row + 6, col) ) {\n\t\t\t\t    lostPoint += 40;\n\t\t\t    }\n\t\t    }\n\t    }\n\n\t    // LEVEL4\n\t    \n\t    var darkCount = 0;\n\n\t    for (var col = 0; col < moduleCount; col++) {\n\t\t    for (var row = 0; row < moduleCount; row++) {\n\t\t\t    if (qrCode.isDark(row, col) ) {\n\t\t\t\t    darkCount++;\n\t\t\t    }\n\t\t    }\n\t    }\n\t    \n\t    var ratio = Math.abs(100 * darkCount / moduleCount / moduleCount - 50) / 5;\n\t    lostPoint += ratio * 10;\n\n\t    return lostPoint;\t\t\n    }\n};\n\nmodule.exports = QRUtil;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"SystemLinkQr_wrapper__2CJMn\",\"qr\":\"SystemLinkQr_qr__ASBOr\",\"plain\":\"SystemLinkQr_plain__1yRC6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"KioskPage_wrapper__2lwpn\",\"top\":\"KioskPage_top__1rY1B\",\"title\":\"KioskPage_title__uTtKZ\",\"linkQr\":\"KioskPage_linkQr__6q4Tf\",\"orgName\":\"KioskPage_orgName__26BvU\",\"subTitle\":\"KioskPage_subTitle__1tHUZ\",\"alert\":\"KioskPage_alert__1zypA\"};","import React, { useEffect, useState } from 'react';\n\nimport dayjs from 'dayjs';\nimport styles from './DateClock.module.css';\n\nconst UPDATE_INTERVAL_MS = 5000;\n\nexport function DateClock() {\n\n    const [dateTime, setDateTime] = useState(() => dayjs());\n\n    useEffect(() => {\n        const int = setInterval(() => {\n            setDateTime(dayjs());\n        }, UPDATE_INTERVAL_MS);\n        return () => clearInterval(int);\n    }, []);\n\n    return (\n        <div className={styles.wrapper}>\n            <div className={styles.time}>\n                {dateTime.format('HH')}<span className={styles.clockDots}>:</span>{dateTime.format('mm')} Uhr\n            </div>\n            <div className={styles.date}>\n                {dateTime.format('dddd[\\xa0]LL')}\n            </div>\n        </div>\n    );\n}","import React, { useContext } from 'react';\n\nimport QrCode from 'qrcode.react';\nimport { appContext } from '../AppContext';\nimport styles from './SystemLinkQr.module.css';\n\nexport function SystemLinkQr({\n    bgColor,\n}) {\n\n    const { config: { url } } = useContext(appContext);\n\n    return (\n        <div className={styles.wrapper}>\n            <div className={styles.qr}>\n                <QrCode\n                    value={url}\n                    size={150}\n                    bgColor={bgColor}\n                />\n            </div>\n            <div className={styles.plain}>\n                {url.replace(/(http|https):\\/\\//, '')}\n            </div>\n        </div>\n    );\n}","import React, { useContext, useEffect } from 'react';\nimport { UPDATE_INTERVALS_SEC, setDefaultUpdateIntervals } from '../updateIntervals';\n\nimport { Alert } from 'antd';\nimport { DateClock } from './DateClock';\nimport { ReservationCalendar } from '../calendar/ReservationCalendar';\nimport { SystemLinkQr } from './SystemLinkQr';\nimport { appContext } from '../AppContext';\nimport { parseQuery } from '../helper';\nimport styles from './KioskPage.module.css';\nimport { useLocation } from 'react-router-dom';\nimport { useTime } from '../calendar/useTime';\n\nexport function KioskPage() {\n\n    const { config: { announcement, orgName } } = useContext(appContext);\n\n    const hour = useTime('hour');\n    const { search } = useLocation();\n\n    useEffect(() => {\n        const params = parseQuery(search);\n        let updateInterval = 60; // 1 minute, default value\n        try {\n            if (params['update'])\n                updateInterval = parseInt(params['update']);\n        } catch (e) { console.error(e); }\n\n        UPDATE_INTERVALS_SEC.RESERVATIONS = updateInterval;\n        UPDATE_INTERVALS_SEC.BASE_DATA = updateInterval * 10;\n        return setDefaultUpdateIntervals;\n    }, [search]);\n\n    return (\n        <div className={styles.wrapper}>\n\n            <div className={styles.top}>\n\n                <div className={styles.title}>\n                    <div className={styles.orgName}>\n                        {orgName}\n                    </div>\n                    <div className={styles.subTitle}>\n                        Reservierungssystem\n                    </div>\n                </div>\n                \n                <DateClock />\n\n                <div className={styles.linkQr}>\n                    <SystemLinkQr \n                        bgColor=\"#f0f2f5\"\n                    />\n                </div>\n\n            </div>\n\n            {announcement &&\n                <div className={styles.alert}>\n                    <Alert\n                        message={announcement}\n                        type=\"info\"\n                        showIcon\n                    />\n                </div>\n            }\n\n            <ReservationCalendar\n                kiosk\n                selectedDate={hour}\n            />\n        </div>\n    );\n}"],"sourceRoot":""}