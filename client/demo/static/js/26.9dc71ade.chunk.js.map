{"version":3,"sources":["user/VerifyMailPage.module.css","user/VerifyMailPage.js"],"names":["module","exports","VerifyMailPage","useContext","authContext","user","setUser","history","useHistory","verifyToken","useParams","send","useApi","postSendVerifyMailApi","sendState","sendMail","postVerifyMailApi","verifyState","verifyMail","useState","resendClicked","setResendClicked","handleCalendarClick","useCallback","replace","handleChangeMailClick","handleResendMail","mail","useEffect","token","className","styles","wrapper","status","title","extra","buttons","type","onClick","disabled","loading","error","visible","large","spin","direction","size"],"mappings":"oIACAA,EAAOC,QAAU,CAAC,QAAU,gCAAgC,QAAU,kC,8MCU/D,SAASC,IAAkB,IAAD,EAEHC,qBAAWC,KAA7BC,EAFqB,EAErBA,KAAMC,EAFe,EAEfA,QACRC,EAAUC,cACRC,EAAgBC,cAAhBD,YAEFE,EAAuB,SAAhBF,EANgB,EAOCG,YAAOC,KAPR,mBAOtBC,EAPsB,KAOXC,EAPW,OAQKH,YAAOI,IAAmBV,GAR/B,mBAQtBW,EARsB,KAQTC,EARS,OASaC,oBAAS,GATtB,mBAStBC,EATsB,KASPC,EATO,KAWvBC,EAAsBC,uBAAY,WACpChB,EAAQiB,QAAQ,OACjB,CAACjB,IAEEkB,EAAwBF,uBAAY,WACtChB,EAAQiB,QAAQ,cACjB,CAACjB,IAEEmB,EAAmBH,uBAAY,WACjCF,GAAiB,GACjBN,EAAS,KAAM,CAAEY,KAAMtB,EAAKsB,SAC7B,CAACZ,EAAUV,EAAKsB,OAYnB,OAVAC,qBAAU,WACFjB,GACAI,EAAS,KAAM,CAAEY,KAAMtB,EAAKsB,SACjC,CAAChB,EAAMI,EAAUV,EAAKsB,OAEzBC,qBAAU,WACDjB,GACDO,EAAW,KAAM,CAAEW,MAAOpB,MAC/B,CAACE,EAAMO,EAAYT,IAElBE,EAEI,qBAAKmB,UAAWC,IAAOC,QAAvB,SACI,cAAC,IAAD,CACIC,OAAO,OACPC,MAAM,8CACNC,MACI,gCACI,8FAC4D,wCAAS9B,QAAT,IAASA,OAAT,EAASA,EAAMsB,OAD3E,gBAGA,uBACA,mHAGA,sBAAKG,UAAWC,IAAOK,QAAvB,UACI,cAAC,IAAD,CACIC,KAAK,OACLC,QAASZ,EACTa,SAAUzB,EAAU0B,SAAWpB,EAHnC,+CAOA,cAAC,IAAD,CAAQiB,KAAK,OAAOC,QAASb,EAA7B,gDAUxBR,EAAYwB,MACL,cAAC,IAAD,IAEPxB,EAAYuB,QACL,cAAC,IAAD,CAAME,SAAO,EAACC,OAAK,EAACC,MAAI,IAG/B,qBAAKd,UAAWC,IAAOC,QAAvB,SACI,cAAC,IAAD,CACIC,OAAO,UACPC,MAAM,mCACNC,MACI,cAAC,IAAD,CAAOU,UAAU,WAAWC,KAAK,QAAjC,SACI,cAAC,IAAD,CAAQT,KAAK,UAAUC,QAAShB,EAAhC","file":"static/js/26.9dc71ade.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"VerifyMailPage_wrapper__1Oit1\",\"buttons\":\"VerifyMailPage_buttons__1a9np\"};","import { Button, Result, Space } from 'antd';\nimport React, { useCallback, useContext, useEffect, useState } from 'react';\nimport { postSendVerifyMailApi, postVerifyMailApi } from '../api';\nimport { useHistory, useParams } from 'react-router-dom';\n\nimport { Ball } from '../Ball';\nimport { ErrorResult } from '../ErrorResult';\nimport { authContext } from '../AuthContext';\nimport styles from './VerifyMailPage.module.css';\nimport { useApi } from '../useApi';\n\nexport function VerifyMailPage() {\n\n    const { user, setUser } = useContext(authContext);\n    const history = useHistory();\n    const { verifyToken } = useParams();\n\n    const send = verifyToken === 'send';\n    const [sendState, sendMail] = useApi(postSendVerifyMailApi);\n    const [verifyState, verifyMail] = useApi(postVerifyMailApi, setUser);\n    const [resendClicked, setResendClicked] = useState(false);\n\n    const handleCalendarClick = useCallback(() => {\n        history.replace('/');\n    }, [history]);\n\n    const handleChangeMailClick = useCallback(() => {\n        history.replace('/profile');\n    }, [history]);\n\n    const handleResendMail = useCallback(() => {\n        setResendClicked(true);\n        sendMail(null, { mail: user.mail });\n    }, [sendMail, user.mail]);\n\n    useEffect(() => {\n        if (send)\n            sendMail(null, { mail: user.mail });\n    }, [send, sendMail, user.mail]);\n\n    useEffect(() => {\n        if (!send)\n            verifyMail(null, { token: verifyToken });\n    }, [send, verifyMail, verifyToken]);\n\n    if (send)\n        return (\n            <div className={styles.wrapper}>\n                <Result\n                    status=\"info\"\n                    title=\"Bitte bestätigen Sie Ihre E-Mail Adresse\"\n                    extra={\n                        <div>\n                            <div>\n                                Es wurde soeben eine Mail mit einem Bestätigungslink an <strong>{user?.mail}</strong> versandt.\n                            </div>\n                            <br />\n                            <div>\n                                Klicken Sie auf den Bestätigungslink, um ihre E-Mail Adresse zu verifizieren.\n                            </div>\n                            <div className={styles.buttons}>\n                                <Button \n                                    type=\"link\" \n                                    onClick={handleResendMail}\n                                    disabled={sendState.loading || resendClicked}\n                                >\n                                    Bestätigungslink erneut senden\n                                </Button>\n                                <Button type=\"link\" onClick={handleChangeMailClick}>\n                                    E-Mail Adresse ändern\n                                </Button>\n                            </div>\n                        </div>\n                    }\n                />\n            </div>\n        );\n\n    if (verifyState.error)\n        return <ErrorResult />\n\n    if (verifyState.loading)\n        return <Ball visible large spin />;\n    \n    return (\n        <div className={styles.wrapper}>\n            <Result\n                status=\"success\"\n                title=\"E-Mail erfolgreich bestätigt.\"\n                extra={\n                    <Space direction=\"vertical\" size=\"large\">\n                        <Button type=\"primary\" onClick={handleCalendarClick}>\n                            Zum Kalender\n                        </Button>\n                    </Space>\n                }\n            />\n        </div>\n    );\n}"],"sourceRoot":""}